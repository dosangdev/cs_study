# 보안의 기본과 개념

기업이나 조직이 보호해야 할 정보 자산을 목록화하고, 그 우선도나 관리 방침 등을 정해서 필요한 대책이나 처치등을 실시하는 것. 정보 보안은 곧 네트워크 보안이라고도 할 수 있다.

### CIA 밸런스

정보 보안에는 기밀성, 무결성, 가용성이라는 세가지 요소로 구성된 CIA 원칙이 있다.

- 기밀성(Confidentiality)
    
    적법한 사람만 정보를 이용할 수 있도록 보호 및 관리되는 것을 의미한다.
    
- 무결성(Integrity)
    
    변경이나 파괴없이 정보가 올바른 상태로 유지되는 것을 의미한다.
    
- 가용성(Availibility)
    
    올바른 정보들이 적절하게 이용 가능한 상태에 있는 것을 의미한다.
    

이 셋 중 가용성은 기밀성, 무결성과 상충하는 경향이 있다. 기밀성과 무결성이 강화되면 정보를 이용하거나 변경할 때 제한이 강해지기 때문에 가용성이 떨어지기 때문이다. 그래서 CIA 원칙은 **밸런스**를 유지하는 것이 중요하다.

### 정보 보안 검토 절차

1. 정보 자산 구체화 : 개인이나 조직에서 지켜야 할 가치가 있는 것은 무엇인가?를 먼저 고려해야 한다. 
2. 정보 자산이 내재하고 있는 위험이나 위협 나열 
3. 나열된 위험이나 위협에 어떻게 대응할지 검토

# 멀웨어 / 컴퓨터 바이러스

악의적인 소프트웨어나 프로그램을 모두 일컬어 멀웨어라고 한다.

### 컴퓨터 바이러스와 멀웨어의 차이

- 컴퓨터 바이러스는 자기 전염 기능, 잠복 기능, 발병 기능을 가진다. 예전에는 바이러스가 컴퓨터에 위해를 가하는 모든 것을 가리켰다.
- 하지만 이후 자기 전염 기능이나, 잠복 기능 등이 명확하지 않고 침입이나 공격만 하거나 더 복잡한 동작을 하는 악성 코드 등이 증가한 뒤로는
- 모든 악의적인 소프트웨어나 프로그램을 일컬어 멀웨어라고 부르고 있다.

### 멀웨어 종류

- 컴퓨터 바이러스 : 자기 전염 기능 + 잠복 기능 + 단독 존재 불가(기존 프로그램에 기생)
- 웜 : 네트워크 등을 이용하여 침입하고 독립적으로 전염되며, 다른 프로그램 등 작동에 악영향을 끼친다.
- 트로이 목마 : 일단은 정상적인 소프트웨어나 프로그램으로 위장하여 침입한 후 다른 프로그램 작동에 악영향을 끼친다. 원칙적으로 본체에 자기 전염 기능은 없다.
- 스파이웨어 : 키보드나 마우스 조작, 표시 화면 등을 감시하고 기록해서 외부로 유출시킨다. 자기 전염 기능은 없다.

# 암호화 기술

어떤 방법으로든 데이터를 해독할 수 없는 상태로 변환하는 기술이다. 암호화는 네트워크 통신에서 필수적인 기술이다.

### 암호화의 기본 개념

- 텍스트 데이터를 암호화 하면 의미 없는 문자로 변환된다.
- 이때 암호화에 사용된 계산방법을 알고 있다면 원래 데이터로 되돌리는 것이 가능하다.
- 이런 계산 방법을 ‘암호 알고리즘’이라고 하며 알고리즘 계산에 사용하는 특정한 부호를 ‘키’라고 한다.
- 암호의 알고리즘을 알고 있어도 계산에 사용된 키가 없다면 암호화 혹은 복호화 둘 다 할 수 없다. 그래서 ‘키’로 기밀성이 유지된다.

### 해시 함수

- 암호화 방식에는 키의 특성에 따라 3가지로 나뉜다.
    - 공통키 암호화 방식
    - 공개키 암호화 방식
    - 해시 함수
- 이 중 해시 함수는 원본 데이터(평문)에 대해 일정한 처리를 한 결과(해시 값)를 출력하는 함수이다.
- 다른 방식과 달리 암호화에 사용하는 키는 없으며, 키를 사용해서 복호화 하는 것도 불가능하다.
- 평문과 해시값은 일대일로 대응되는데, 해시 값을 계산하여 평문으로 되돌리는 것은 거의 불가능하다.
- 이런 특성 때문에 비밀번호 저장, 데이터 변조 방지 등에도 이용 된다.
- 해시 함수에서는 같은 데이터는 반드시 같은 해시 값이 출력되므로 입력한 값을 해시 함수로 처리한 결과와 등록된 해시 값이 일치하는지 여부로 비밀번호를 검증한다.

# 공통키 암호화 방식 / 공개키 암호화 방식

키를 사용한 암호화 방식이다. 네트워크의 기밀성과 패킷의 무결성 등을 유지하는데 필요한 기술이다.

### 공통키 암호화 방식과 공개키 암호화 방식의 차이

- 공통키
    - 암호화에 사용되는 공통키를 송신자와 수신자가 양쪽에서 비밀리에 공유하여 암호화 통신을 수행하는 방식이다.
    - 하지만 네트워크로 교환할 때 유출될 위험이 있다.
- 공개키
    - 암호화와 복호화에 2개의 키(공개키, 개인키)를 사용한다.
    - 송신자는 수신자가 공유한 공개키를 사용하여 원본 데이터를 암호화한 후 전송한다.
    - 암호화된 데이터를 수신자는 본인이 가진 개인키로 복호화 한다.
    - 복호화에 사용되는 개인키를 자신만 알고 있으면 네트워크로 공개키를 전송해도 안전하다.
    - 공개키를 네트워크에서 공유할 수 있으므로 HTTPS 통신, VPN 통신의 네고시에이션, 키 교환, 전자 서명 등에 이용된다.

### 공개키 암호화 방식을 역으로 사용한 전자 서명

- 송신자가 자신의 개인키로 데이터를 암호화 해서 전송한다.
- 수신자는 공개키로 그 데이터를 복호화 할 수 있다.
- 이러면 암호화 통신이 성립되지 않는다.
- 하지만 송신자의 공개키로 암호화된 데이터를 복호화 할 수 있다는 것은 해당 데이터가 송신자만이 가지고 있는 개인키로 암호화 되었다는 것을 증명한다.
- 전자 서명은 이 원리를 이용한 것이다.
- 증명을 확실하게 하려면 공개키가 위조되지 않은 송신자 것임이 증명되어야 한다.

# 서버 인증서 / 인증 기관

공개키 암호화 방식을 통해 접속한 곳이 위장된 웹 페이지나 공격자의 웹 페이지가 아님을 증명할 수 있다. 이 증명에는 서버 인증서가 이용되며, 이를 발급하는 곳이 인증 기관이다.

### 본인 인증을 위한 서버 인증서

- 웹 페이지에 비밀번호나 신용 카드처럼 민감한 정보를 입력할 때는 통신을 암호화해야 한다. 하지만 접속한 곳이 위조된 웹 페이지나 공격자의 웹 페이지라면 의미가 없다.
- 그래서 사용되는 것이 서버 인증서이다.
- 서버 인증서는 공개키 암호화 방식을 이용한 전자 서명을 통해 인증 기관(CA)이 본인임을 인증 해 주는 인터넷상의 체계이다.
- HTTPS 통신에서는 패킷을 암호화하기 전에 접속한 곳에서 서버 인증서를 받아 정당성을 검증한다.

### 서버 인증서를 발행하는 인증기관

- 인증 기관은 HTTPS 통신 등에서 서버 인증서를 발급하고, 접속하는 웹 서버 등의 적법성을 인증하는 기관이다. 서버 인증서는 인증 기관 서버에서 발급된다.
- 기업이 자사 사이트에서 HTTPS 통신을 지원하려면 기업이나 웹 서버 등 정보를 인증 기관에 등록해야 한다.
- 등록할 때는 대면이나 전화로 실존하는 기업인지 확인하여 웹 사이트를 인증하는 과정을 거친다.
- 등록이 되면 웹 사이트에 서버 인증서와 함께 공개키와 개인키 쌍이 발급된다.

# SSL / TLS

SSL(Secure Socket Layer)과 TLS(Transport Layer Security)는 암호화 통신을 수행하는 절차를 규정한 프로토콜이다.

### SSL과 TLS

- SSL과 TLS는 웹 브라우저와 웹 서버간의 암호화 통신에 대한 프로토콜이다.
- SSL은 원래 웹 브라우저 개발사에서 만든 프로토콜이었다.
- 그래서 인터넷 기술 표준화 단체인 IETF가 SSL을 기반으로 TLS를 다시 설계하여 인터넷 표준으로 삼았다.
- TLS는 SSL을 계승했지만 둘 사이에 엄격한 호환성은 없다.
- 이후 SSL 3.1 버전과 TLS 1.1 이전 버전에 취약점이 발견되어 SSL은 폐지, TLS는사용을 권장하지 않았고 현재는 TLS 1.2와 1.3이 정식 프로토콜이다.

### TLS를 이용한 암호화 통신

- TLS는 공개키 암호화 방식을 이용한다.
- 절차
    - 웹 서버에 암호화 통신 연결 요청
    - 웹 서버에서 서버 인증서와 공개키 전송
    - 웹 브라우저 측에서 인증기관에 서버 인증서 정당성 검토
    - 암호화 통신용 키를 생성하는데 필요한 난수(정보)를 서버측이 보낸 공개키로 암호화 그리고 전송
    - 서버 측은 난수(정보)를 개인키로 복호화하고, 그 난수를 바탕으로 암호화 통신 키 생성
    - 웹 브라우저 측도 난수로 암호화 통신 키 생성
    - 사실상 공유하게 된 암호화 통신 키로 서로 통신함

### SSL 개발사

당시 주로 사용되던 웹 브라우저 ‘Netscape Navigator’의 개발사인 넷스케이프 커뮤니케이션즈에서 개발했다.

# 방화벽

방화벽은 네트워크 세그먼트 경계에 설치되는 게이트웨이의 일종이다. 주된 역할은 외부에서 들어오는 불필요한 패킷이나 수상한 접속 등을 차단하는 것이다.

### 방화벽 역할

- 일반적으로 방화벽은 LAN과 인터넷 경계인 에지 라우터 바로 뒤에 설치된다.
- 방화벽은 패킷의 IP 주소, 포트 번호, 패킷 내용 정보(패킷 헤더, 페이로드 등의 정보)를 확인하여 LAN 내부로 들일지 말지를 결정한다.

### 방화벽 종류

- 패킷 필터링형 : 주로 IP주소나 포트 번호를 기준으로 통과시킬 패킷을 제어한다.
    - 스택틱형 : 차단하거나 통과시킬 IP 주소나 포트 번호를 고정 리스트로 관리한다.
    - 다이내믹형 : 특정 통신에 대한 응답이면 허용하는 동적 리스트로 관리한다.
    - 스테이트풀형 : 패킷 뿐만 아니라 프로토콜 순서도 감시하여 부정한 액세스를 차단한다.
- 게이트웨이형 : 네트워크의 게이트웨이로서 모든 통신을 제어한다. 네트워크 내.외부 모두 이 게이트형이 창구 역할을 하기 때문에 프록시형이라고도 한다.

### 중국의 GFW (Great FireWall)

# DMZ

DMZ는 외부 네트워크와 내부 네트워크 사이에 설치하는 네트워크상의 세그먼트를 의미한다.

### 공개 서버와 내부 네트워크 보호

- DMZ란 내부 네트워크를 외부 공격에서 보호하려고 방화벽 등으로 경리된 네트워크상의 세그먼트이다.
- 웹 서버를 인터넷에 공개할 때, 웹 서버에 인터넷을 통해 액세스 할 수 있게 한다. 이 때 웹 서버는 에지 라우터보다 안쪽 세그먼트에 두게 되는데, 외부에서 오는 무작위 패킷이 내부까지 도달하는 것은 보안상 위험 요소가 된다.
- 그래서 웹 서버를 배치한 세그먼트를 방화벽으로 격리해서 내부 네트워크를 보호하는 것이다.

### 라우터 등을 활용한 DMZ의 다양화

- 실제 네트워크에서는 DMZ 앞뒤로 방화벽을 설치하기도 한다.
- 요즘 라우터는 방화벽 기능이나 DMZ 기능이 있어 유연하게 환경을 구축할 수 있다.

# IDS / IPS

방화벽만으론 막을 수 없는 공격이 입구를 뚫고 침입 시 그것을 탐지하고 방지하는 시스템이다.

### IDS와 IPS

- 방화벽의 방어 정책은 입구의 벽을 높이고 검문을 강화하여 안전을 확보하는 것이다.
- 그러나 공격 수법이 고도화 되며 이런 방법만으로는 다양한 공격을 막을 수 없었다.
- 그래서 부정한 패킷이 방화벽을 통과한 후에도 내부에서 침입을 탐지하고 막는 IDS, IPS가 생겨났다.
- 두 시스템 다 탐지 방법으로는 스테이트풀형과 마찬가지로 IP주소 포트 번호 뿐만 아니라, 프로토콜 순서와 처리 상황 등도 검증한다.
- 두 시스템은 설치 장소에 따라 호스트형과 네트워크형으로 나뉘는데 호스트형은 서버에 소프트웨어로 설치되어 부정한 패킷을 검사하고, 네트워크형은 네트워크상에서 흐르는 패킷을 검사한다.

### 다양한 공격을 방어하는 시스템

- IDS, IPS, 고기능 방화벽은 차세대 방화벽(NGFW)이라고도 한다.
- 이외에도 SQL 인젝션, XSS, CSRF처럼 웹 사이트의 취약점을 노린 공격에서 보호하는 WAF(Web Application Firewall), 안티바이러스, 로그 감시 등 여러 기능을 방화벽에 통합한 UTM(Unified Threat Management)같은 시스템도 있다.

# VPN / 터널

VPN은 불특정 다수와 연결되는 네트워크에 나만이 사용할 수 있는 전용선을 가상으로 구축하는 기술이다.

### VPN

- 호스트를 VPN으로 연결하면 연결대상과 교환하는 패킷이 암호화된다.
- VPN 통신의 패킷은 다른 패킷과 마찬가지로 여러 라우터를 거쳐서 연결 대상까지 도달 하지만, 중계 라우터는 패킷 내용을 해독할 수 없어서 경로는 보호된 상태이다.
- 이 기술을 바로 터널이라고 하는데, 원래 이 용어는 프로토콜의 패킷을 그대로 다른 프로토콜의 패킷에 실어 전송하는 기술을 뜻하고, 경로 암호화는 필수 요소가 아니다.

### 암호화와 터널을 구현하는 VPN 프로토콜

- IPsec
    - 연결 대상의 인증 기능과 패킷의 암호화 기능을 갖춘 프로토콜로, 인터넷 표준이다.
- L2TP
    - 패킷 암호화는 하지 않고 터널로 연결 대상과 전용 경로를 구축하는 프로토콜
- PPTP
    - 윈도에서 표준으로 사용되던 프로토콜
- SSL-VPN
    - SSL(세션 계층 프로토콜)을 사용하므로 웹 브라우저 연결을 VPN으로 사용하고자 할 때 이용한다. SSL-VPN은 HTTPS를 사용해서 암호화와 터널을 구현한다.

# 트래픽 감시 / 로그 감시

네트워크를 안전하게 보호하는데 액세스 제어 및 통신 암호화뿐만 아니라 트래픽 및 로그 감시도 중요하다.

### 트래픽 감시

- 보안을 높은 수준으로 유지하려면 네트워크 상태를 항상 감시하고 검증하는 것이 중요하다.
- 네트워크 상태를 늘 파악하지 않으면, 갑작스럽게 발생한건지 원래 있던건지 알 수 없는 상황이 온다.
- 네트워크의 수상한 동작을 검출하려면 네트워크 트래픽을 검사해야 한다.
- 예를 들면, 평소에 발생하지 않는 해외 접속이나 통신 등이 있는 확인한다.
- 또는 서버의 이벤트 로그를 확인하여 수상한 통신, 중요 데이터에 대한 액세스나 로그인 오류 등이 있는지 확인한다.

### 트래픽 감시 방법

- 트래픽 감시는 차세대 방화벽과 같은 고기능인 제품이나 패킷 캡처 기능이 있는 네트워크 기기를 이용한다.
- 이 기기들을 이용하면 네트워크를 흐르는 패킷을 상시 체크할 수 있으므로 거의 실시간으로 이상을 탐지할 수 있다.

### 로그 감시 방법

- 먼저 서버의 로그 파일을 소프트웨어로 해석한다.
- 로그 파일에 남아 있는 공격이나 이상 등 흔적을 체크하여 이상이 발생하지 않았는지 조사한다.
- 로그 감시는 과거 발생 상황을 조사하게 된다. 실시간이 아니다.

### 용어

- 패킷 캡쳐 기능 : 네트워크에 흐르는 패킷을 캡처하여 그 내용을 표시(시각화)하거나 분석, 집계 등을 수행하는 기능이다.