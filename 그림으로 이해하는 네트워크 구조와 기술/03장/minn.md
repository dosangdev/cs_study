3장. 네트워크 종류와 구성을 알아보자
---

### 27. 클라이언트 서버형 vs 피어 투 피어형

#### - 클라이언트-서버형


<img src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/81b47ae3-b87a-41fd-87ad-5dba717b943b" width = 500px>


>두 컴퓨터(단말기)가 있는데, 하나는 서비스를 **제공하는** 컴퓨터(서버)고 다른 하나는 서비스를 **받는(요청하는)** 컴퓨터(클라이언트)

웹 개발을 공부하고 있다면 익숙할 개념.

서버 단말기와 클라이언트 단말기는 고정되어 있는 것이 아니고, 한 연결 안에서 서비스를 제공하는 쪽을 서버, 받는 쪽을 클라이언트라고 한다. 


#### - 피어 투 피어형

>실시간 전송, 고도화 된 통신 등에서는 서버를 거치지 않고 단말기끼리 직접 통신하는 방식

인터넷은 기본적으로 클라이언트-서버 형태의 패킷 교환 방식으로 통신을 하지만 실시간 전송이 필요할 때는 속도가 느리다.


### 28. LAN
LAN(Local Area Network)를 지금까지 많이 다뤘지만, 이번엔 LAN의 개념에 대해 좀 더 자세히 알아보자.

일반적으로 LAN이라고 하면 좁은 지역(건물, 사무실 등)의 범위를 갖는 네트워크를 말한다. 하지만 더 큰 규모의 대학 캠퍼스나, 지리적으로 떨어진 본사와 지사를 하나의 LAN으로 구성하는 경우도 있다. 

이처럼 LAN은 정해진 규모가 없다. 즉 물리적으로 좁은 지역을 의미하는 것이 아닌 논리적인 로컬 영역을 의미한다. 

마치 우리가 '주변 이웃들'이라고 말할 때 , 우리 집 반경 100m 내 사는 사람들인지, 목현동 주민 전체인지, 광주시 시민 전체인지 정해져 있지 않고 정의하기 나름인 것과 비슷하다.

#### - 기술적인 의미의 LAN

기술적으로 정의하자면 LAN은 한 스위치로 묶인 네트워크라고 할 수 있다. 이 스위치는 또 L3 스위치(=라우터)에 묶여있다.


#### - LAN 내에서의 통신
지금까지 배운 내용을 정리하자면, 
```
LAN에서 사용하는 네트워크 프로토콜은 이더넷이며, 이더넷에서는 장치끼리 랜 케이블(트위스트 페어 케이블)로 연결한다. 커넥터 규격은 RJ-45이다.
물리적인 주소로는 MAC 주소를 가지며, 논리적인 주소로는 IP 주소를 가진다.
MAC 주소는 계층 구조가 없는 일련 번호일 뿐이라 이것만 가지고는 라우팅을 할 수 없기 때문에,
라우팅을 할 수 있는 논리적인 주소인 IP 주소가 필요하다. IP 주소는 TCP/IP 프로토콜에서 이용한다.
IP 주소로 라우팅을 하는 업무는 라우터(L3 스위치)에서 담당한다.
```

### 29. 이더넷
#### - 이더넷
개발 초기에는 버스형 네트워크로 개발됐으나 전송 속도가 빨라지면서 스타형 네트워크로 구성하고 있다. (중앙에 허브가 있는 형태)

#### - CSMA/CD와 CSMA/CA
**CS**(Carrier Sence) : 매체의 상태를 감지

**MA**(Multiple access) : 한 대가 아닌 여러 기기가 한 회선을 이용

**CD**(Collision Detect) : 충돌을 감지

>#### CSMA/CD의 과정
>1. 매체가 idle한지 확인
>2. idle 하면 패킷 보냄
>3. 충돌이 감지되면 데이터 전송을 멈추고, 충돌이 감지되었음을  LAN 내 컴퓨터들에게 알림
>4. 랜덤한 시간동안 대기 후 재전송

**CA**(Collision Avoidance) : 충돌을 회피
>#### CSMA/CA의 과정
>1. 매체가 idle한지 확인
>2. idle 하면 핸덤한 시간동안 대기
>3. 다시 idle한지 확인
>4. 또 랜덤한 시간동안 대기
>5. 또 다시 idle 확인
>6. idle 하면 전송. 전송 후 일정 시간동안 수신자의 ACK를 기다림
>7. 시간 내로 ACK가 오지 않으면 처음부터 다시 반복.

##### CSMA/CD는 유선 LAN에서 주로 사용하고, 무선 LAN의 경우 충돌을 감지하는 것이 쉽지 않기 때문에 충돌을 회피하는 방식인 CSMA/CA 방식을 사용한다.


#### - 이더넷 프레임의 구조
<img width="705" alt="image" src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/1bc85888-57e7-4248-aea2-dfc6357f2fe7">

Type 필드 : 프레임 종류, 페이로드의 프로토콜
check sum 필드 : 페이로드 부분의 데이터 1byte씩을 더한 합계를 나머지 또는 유사한 함수로 계산한 값


### 30. 무선 LAN
>전파를 사용하여 무선으로 연결한 LAN

#### - 무선 LAN의 보안 대책
전파는 누군가 중간에서 가로챌 위험(도청)이 있으므로 무선 LAN에서는 보안 대책을 필수적으로 세워놔야 한다.

일반적으로 무선 통신 암호화 기술을 사용하는데, 다음과 같은 종류가 있다.

>WEP : RC4 알고리즘을 이용한 암호 방식. 현재는 보안 수준이 매우 낮아 사용하지 않는다.
>
>WPA : TKIP로 암호화를 복잡하게 한 방식. WPA2, WPA3도 나와있다.

*이외에 MAC 주소를 인증하게 하여 허용된 기기만 연결할 수 있게 하는 방법이나 스탤스 SSID와 같은 보안 대책도 있는데, 이들 방법은 프로토콜만 알고 있다면 손쉽게 뚫린다.
무선 랜을 더 안전하게 이용하려면 무선 LAN 내 별도의 인증 서버를 두는 등의 대책도 추가적으로 필요하다.*


### 31. IEEE 802.X 규격
#### - IEEE 802.3 (이더넷)
이더넷은 프로토콜 뿐만아니라 물리 계층인 케이블 규격까지 규정하고 있다.

8가닥의 트위스트 페어 케이블(랜선)과 1Gbps 이상의 통신에서는 광섬유 케이블도 사용한다.

케이블에 연결되는 커넥터 규격은 100BASE-T, 1000BASE-FX 등이 있다.


#### - IEEE 802.11 (무선 LAN)
무선 LAN의 규격 표시법에서는 이용하는 주파수 대역과 전송 속도에 따라 규격 번호 뒤에 서픽스가 붙는다.
<img width="540" alt="image" src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/84b2fad8-d342-4ee4-baf9-f8fbd5224e0c">

### 32. WAN
LAN은 논리적인 의미로서 로컬 영역에 해당하는 네트워크라고 했다.

마찬가지로 WAN의 상대적인 의미는 LAN 이외의 외부 네트워크를 뜻한다. 물론, 기술적으로는 거대한 네트워크나 인터넷, 통신 사업자가 제공하는 전용선(계약자가 회선을 독접하여 사용하는 통신망)을 의미하기도 한다.

'로컬'이라는 영역을 정하고, 그 로컬을 기준으로 안쪽은 LAN, 바깥쪽을 WAN이라고 한다.

### 33. VLAN
원래는 같은 스위치로 묶인 장치들이 하나의 세그먼트인데, 스위치가 각각의 장치마다 VLAN-ID를 부여하여 가상의 세그먼트로 분할할 수 있다.

동일한 스위치가 연결된 기기 뿐만아니라 다른 스위치에 연결된 기기도, 스위치끼리 캐스케이드 연결을 해주면 VLAN을 통해 같은 세그먼트로 묶을 수 있다.

동일한 (가상의) 세그먼트 = 브로드캐스트 패킷이 도달할 수 있는 범위.

<img src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/2e7cdc27-02d0-4136-94d2-eb73bba7d6ac" width = 500px>

### 34. SDN (Software Defined Network)

<img src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/d8dd6a5a-f904-4021-919a-788db978f7e2" width = 700px>


기존의 네트워크에서는 라우터, 스위치 등의 네트워크 장비들이 라우팅이나 IP 주소 관리 등의 네트워크 관리/제어의 업무와 데이터 패킷 전송의 업무를 모두 수행했다.

이런 네트워크 관리의 영역(컨트롤 플레인)과 데이터 전송의 영역(데이터 플레인)을 분리하여, 더 유동적이고 유연한 네트워크를 구성하는 기술이 SDN이다.

각 장치들은 라우터나 스위치에 연결되어 있고, 또 각 라우터들은 연결되어 있다. 

SDN 컨트롤러가 따로 구비되어 있고, OpenFlow 등의 프로토콜을 이용한 패킷 통신의 방식으로 각 라우터를 제어한다.

SDN 컨트롤러는 웹을 통해 제어할 수 있다. (REST API)

### 35. LAN끼리 연결한 네트워크
#### - 일반적인 기업 LAN
부/과 단위로 스위치에 연결하여 세그먼트를 구성하고, 그 스위치를 또 다른 스위치로 묶어서 상위 세그먼트를 구성한다.

라우터는 3계층 장비로, 라우터나 L3 스위치 등 3계층 장치를 이용하면 1, 2계층의 처리는 숨겨서 추상적으로 관리할 수 있다.

즉 네트워크 관리자는 MAC 주소 등의 하위 계층에 대한 정보를 몰라도, 라우터가 알아서 처리하기 때문에 네트워크 관리가 용이해진다.

#### - 인트라넷
기업 LAN 내부에는
애플리케이션 서버만 연결된 세그먼트, 파일 서버 세그먼트, 인증 서버 세그먼트... 등 서버만 연결된 세그먼트도 있고,

또 서버는 클라우드에 올리고, 클라이언트만 연결된 세그먼트도 존재한다. 

>인트라넷:보안 등의 이유로 인터넷에 직접 연결되지 않은 기업 내무 시스템을 위한 네트워크. 사내 내부에서만 접속 가능.


<img src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/a8023c22-510f-4be5-958d-b07761eda9fd" width = 500px>

#### - L3 스위치 vs 라우터
두 장치는 기능 면에서 거의 동일하지만, 부가적인 차이가 있다.
| |L3 스위치|라우터|
|-|-|-|
|처리 속도|빠르다|느리다|
|패킷 제어|제어 불가능|제어 가능|
|포트 수|16~48개|적다|
|용도|L2 스위치를 묶을 때 사용한다.|인터넷이나 WAN의 경계에 설치|


### 36. 인터넷에 연결된 네트워크
앞서 배웠듯이, LAN의 각 장치는 인터넷에 직접 연결하지 않는다.
왜냐하면 
1. 보안 상의 문제 - 인터넷에는 수많은 공격 패킷이 돌아다닌다.

2. 글로벌 IP 주소가 부족하기 때문.

그래서, LAN과 인터넷의 경계에 에지 라우터가 방화벽을 세우고 글로벌 IP 주소와 프라이빗 IP 주소의 변환 업무를 맡고 있다!

### 37. 모바일 네트워크
#### - 모바일 네트워크와 인터넷이 통신하는 방법
모바일 네트워크(4G/5G 등의 이동 통신망)는 인터넷과 마찬가치로 패킷 교환 방식을 사용한다. 그러나 데이터 링크 계층이나 물리 계층에서 사용되는 프로토콜이 다르다.

이렇게 서로 다른 프로토콜을 통신사의 모바일 네트워크에 설치된 인터넷 게이트웨이가 프로토콜을 변환하여 인터넷으로 전송하면, 인터넷과 모바일 네트워크가 통신할 수 있게 된다.

###### * 스마트폰을 셀룰러 데이터로 이용할 때와 Wi-Fi에 연결해서 이용할 때 통신 방식(프로토콜)이 조금 다르다!

#### - 이동하는 네트워크 
>통신 모듈: 전자기기의 통신을 담당하는 부품
>
>텔레매틱스: 차량 내부의 Wi-Fi, GPS 내비게이션, 스마트폰 제어 등 차량과 인터넥을 연결해주는 기능.
>
>인포테인먼트: 차량에 있는 안드로이드 올인원 같은 기기들.
>
>텔레워크 : 디지털 노마드. VPN 이용하여 보안성↑
