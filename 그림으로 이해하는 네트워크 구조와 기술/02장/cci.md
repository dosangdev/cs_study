## 프로토콜

컴퓨터와 서버에서 흐르고 있는 데이터를 다음과 같이 3가지로 분류할 수 있다.

1. **데이터가 갈 주소**
2. **신호 데이터**
3. **데이터 본체**

그리고 이 3가지를 어떻게 나눌 것인지 또 절차등은 어떻게 할 것인지는 사람들간의 약속이 있어야 한다.

그래서 탄생한 것이 프로토콜 곧 **통신 규약**이다.

### 프로토콜 종류

1. LAN 케이블 : 이더넷 프로토콜
2. 인터넷 : IP, TCP, UDP
3. 이메일 수신 : POP
4. 이메일 전송 : SMTP
5. 웹사이트 : HTTP, HTTPS

이 밖에도 여러 종류가 있다. 자세한 것은 나중에.

## 네트워크 계층

1. 네트워크 계층(레이어) : 하드웨어, 프로토콜, 애플리케이션 3단계로 계층을 나누어 처리하는 구조.

전송하는 애플리케이션과 수신하는 애플리케이션에서만 데이터 변환 작업을 수행하면 비효율을 초래하기 때문에, 하드웨어나 프로토콜에서 처리가 가능하다면 먼저 처리해서 효율을 높이는 방식.

1. 프로토콜 스택 : 헤더(주소)와 페이로드(내용)로 계층을 만들어 처리하는 구조

하위 계층의 헤더는 목적지에 관련된 정보를 가지고 있고, 페이로드는 상위 게층의 헤더와 페이로드를 포함하고 있다. 그리고 헤더 정보가 해석된 뒤 페이로드는 상위 계층으로 이동한다.

## 네트워크 모델

1. OSI 참조 모델 (7단계) 

네트워크 계층 구조와, 프로토콜 스택으로 이뤄진 모델. 1977년에 제정되어, 이 모델을 그대로 구현한 네트워크나 장비가 거의 없다. 하지만 현재도 계층을 구분하는 하나의 모델로 이용되어지고 있다.

프로토콜을 계층 구조로 만든 개념. 고로 애플리케이션은 연결되는 컴퓨터나 케이블의 차이를 처리할 필요 없어 장비나 소프트웨어 개발에 유리해짐.

1. 인터넷 기준 TCP/IP 모델 (4단계) : OSI 참조 모델을 기반으로 했다 그래서 게층이 일부 대응이 된다. 그러나 OSI 참조 모델과 완전히 똑같지 않다.

*두 모델의 계층구조는 다음에 배우게 된다.

## TCP/IP

인터넷에서 통신할 때 사용하는 기본 프로토콜.

TCP/IP가 식별자로 IP 주소를 사용하기 때문에 TCP/IP라 불리지만 프로토콜은 총 3가지가 있다.

### 구성

**IP 프로토콜  →  UDP프로토콜  →  TCP 프로토콜**

***IP와 UDP처럼 목적지만 설정해서 보내는 데이터를 데이터그램이라고 한다.**

### IP 프로토콜 (UDP, TCP등 다른 프로토콜의 기본)

헤더 : IP주소 등 목적지에 잘 도착하기 위한 정보 (최소한의 절차와 규칙을 규정)

페이로드 : 상위 계층(UDP, TCP)의 헤더와 페이로드

### UDP 프로토콜

헤더 : 포트번호를 제외하면 IP 프로토콜과 거의 다르지 않다. (다른점 : 속도와 편의성을 우선한다.)

페이로드 : 상위계층(TCP)의 헤더와 페이로드

### TCP 프로토콜

헤더 : 포트번호 + 재전송, 오류 등을 처리하는 정보 + 세션 통신에 필요한 정보(시퀀스 번호, 세션 플래그와 응답확인 번호 등)

페이로드 : 데이터본체


# IP 주소

## 정의

네트워크에서 출발지나 목적지를 식별하는 주소(식별자)이다. 

IP 주소는 두가지로 분류할 수 있다.

인터넷에서 사용하는 **글로벌 IP 주소** 그리고

LAN(내부)에서 사용하는 **프라이빗 IP 주소**가 있다.

## IP 주소의 구조

현재 사용되는 IP 주소는 두가지 버전이 있다. **IPv4와 IPv6**

IPv4의 특징으로는

1. 32비트의 저장공간을 가지고 있다.
2. 32비트를 8비트씩 4등분(1byte)해서 10진수로 표시한다. 이 때 4등분 된 주소를 점을 찍어 구분한다. (Ex 192.168.100.1)
3. 약 43억개의 주소 공간을 사용할 수 있다. (하지만 43억개를 다 사용할 수 있는 것은 아니다.)

## 글로벌 IP 주소와 프라이빗 IP 주소

글로벌 IP주소는 인터넷을 사용할 때 쓰는 주소이다. 기기마다 **단 한개**의 고유한 글로벌 IP 주소를 가지고 있고, 이 주소를 사용하면 인터넷과 연결된 모든 기기와 통신할 수 있다.

프라이빗 IP 주소는 LAN 내부 등의 주소 공간에서 사용하는 IP이다. 다른 LAN과 **중복되는** IP 주소를 사용해도 인터넷을 이용하지 않으므로 괜찮다. 

### 용어

- 옥텟 : 8비트(1바이트)단위를 네트워크에서 이르는 용어.

# IPv4 / IPv6

## 정의

IPv4와 IPv6는 프로토콜의 버전차이이고, 서로 호환성이 없으며, 혼재되어 있다.

## IPv4와 IPv6의 차이점

IPv4는 **4옥텟** 약 43억개. IPv6는 **16옥텟** 약 340간개

서로 호환성이 없어 IPv6를 지원해주는 앱이나 서비를 이용해야함.

**그러나** 

윈도우, mac, 리눅스 등 운영체제. 페이스북 등 웹 서비스. 크롬, 엣지 등의 웹 브라우저 등. DNS 대부분이 IPv6를 지원하므로 인터넷 사용자가 어떤 프로토콜을 사용하는지 구분할 필요가 없다.

## 암호화 통신 등의 특징이 있는 IPv6

1. 프로토콜 수준에서 암호화 통신이 규정되어 있다.
2. MAC 주소를 이용하여 IPv6 주소를 자동으로 생성할 수 있고, 2계층을 포함한 설정 자동화가 가능하다. (? 뭔말)
3. 헤더가 IPv4보다 단순해서 처리가 간단하다. (그림 참조)
4. 계층 구조가 엄격하여 라우팅 효율이 좋다 (? 뭔말)

### 용어

- IP 주소 : IANA라는 조직이 관리하는 식별자. 대륙을 5로 나눠 각 대륙에 블록을 분배해서 모든 IPv4 주소를 지급하고 있다.

# MAC 주소

## 정의

MAC 주소란 네트워크에 연결되는 각 기기나 단말기가 고유하게 가지는 식별자이다. 

IEEE가 관리하고 각 제조사에 고유코드를 할당하고 있다.

## 주소의 구조

MAC 주소는 길이가 48비트 약 280조개의 주소를 가지고 있다.

그리고 24비트 씩 **상위(벤더코드)**와 **하위(노드번호)**로 나누어져 있다.

벤더코드는 각 제조사마다 할당받는 고유한 번호로, 대기업 같은 경우 (예를 들어 흡수합병을 거쳤을 때, 다른 회사의 벤더코드를 흡수하는 경우) 여러 개의 벤더코드를 가지고 있을 수 있다.

노드번호는 각 제품마다 할당받는 번호이다.

01-AB-47-59-2F-C0

주소의 표기는 16진수로 8비트씩 6개로 나눠 표현한다. 구분은 하이픈으로 한다.

## MAC 주소와 IP 주소의 차이

|  | MAC 주소 | IP 주소 |
| --- | --- | --- |
| 프로토콜 | 이더넷 | TCP/IP |
| 계층 | 2계층 이하 | 3계층 이상 |
| 식별 대상 | 단말기 | 네트워크 호스트 |
| 길이 | 48비트 | 32비트 / 128비트 |
| 식별자 수 | 약 280조개 | 약 43억개 |
| 관리단체 | IEEE | IANA |

MAC 주소는 OSI 참조 모델에서 2계층 이하이다.

IP주소는 TCP/IP 모델에서 3계층 이상이다.

### MAC 주소의 체계 중

MAC 주소의 데이터는 일반적으로 ROM(쓰기 금지 메모리)에 기록되므로 변경할 수 없지만, 최근 컴퓨터나 스마트폰에서는 네트워크에 연결될 때 기기의 특정을 막고자 랜덤 MAC 주소를 설정할 수 있습니다.

### 용어

- 네트워크 카드 : 이더넷 등 LAN 프로토콜과 컴퓨터나 서버 내 공통 버스 신호의 프로토콜 변환 및 신호 변환을 수행하는 하드웨어를 의미한다. (?)

# ARP

## 정의

IP 주소에서 해당 장비의 MAC 주소를 확인하는 프로토콜이다.

## 장치의 MAC 주소를 조사하는 ARP

일반적인 LAN에서는 허브나 라우터가 네트워크를 묶어준다. 이 네트워크에서 각 장치연결은 이더넷을 사용한다. 하지만 연결된 장치에서 실행되는 **애플리케이션**은 TCP/IP 프로토콜 (3계층)이상을 사용하므로 IP 주소를 알아도 2계층 이하인 MAC 주소를 알 수 없다.

LAN 내에서 패킷을 교환하려면 해당 IP 주소를 가지고 있는 장치의 MAC 주소를 확인하고 이더넷 프레임을 구성해야 한다. 이떄 사용되는 것이 ARP이다.

## ARP 작동방식

ARP는 MAC 주소를 알고자 하는 IP 주소 정보를 LAN 내부에 있는 모든 장치에 전송한다. 이렇게 대상을 지정하지 않고 모든 장치에 패킷을 전송하는 것을 **브로드캐스트**라고 한다.

이렇게 브로드캐스트를 하면 모든 장치가 IP 주소에 대한 패킷을 수신하면 각 장치들은 자신의 MAC 주소를 **회신**한다.

### 단점 & 대체방식

이렇게 통신할 때마다 일일이 ARP로 조회하는 것은 효율적이지 않기 때문에 허브나 라우터에서 LAN 내 모든 기기의 IP 주소와 MAC 주소의 대응표를 만들어둔다. 이 때 각 장비는 브로드캐스트를 하지 않고 라우터나 허브에 문의하면 LAN내 모든 장비의 MAC 주소를 확인할 수 있다.

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/d9611048-6b45-4f0f-b861-0948f3b6a5a0/0655042e-9c29-474e-9dce-a8dcf73754ef/Untitled.png)

### 용어

- 패킷 : IP 프로토콜에서 헤더와 페이로드를 합친 데이터 전송 단위.

# 포트 번호

## 정의

TCP/UDP 프로토콜에서 사용되는 식별자이다. IP 주소만으로는 특정할 수 없는 LAN 내 장치나, 단말기 그리고 상위 프로토콜이 이용하는 애플리케이션 종류 등을 지정한다.

## 포트 번호의 역할

포트 번호는 TCP/UDP 의 헤더 부분의 첫 2옥텟에 포함되어 있다. 16비트므로 0 ~ 65535까지 나타낼 수 있다.

1. **목적지 포트 번호** : 목적지로 보낸 패킷이 어떤 애플리케이션을 위한 것인지 확인할 수 있다. IP 주소로는 목적지 서버는 지정할 수 없지만 어떤 애플리케이션을 사용할 것인지는 지정할 수 없기 때문이다.

1. **출발지 포트 번호** : 패킷을 보낸 쪽의 사용자와 터미널을 식별할 수 있다. 수신 받는 측에서 이메일을 보낸 계정이나 웹 사이트에 액세스한 기기 등을 식별할 필요가 있기 때문에.

## 주요 애플리케이션의 번호 - 잘 알려진 포트

포트번호는 3개로 나눠 사용하는 것이 인터넷상 관례이다.

1. 잘 알려진 포트 번호 (0 ~ 1023) : DNS, HTTP, POP3 등
2. 등록된 포트 번호 (1024 ~ 49151) : 1443포트 (MS에서 제공하는 SQL을 사용하기 위한 포트), 8080포트 (HTTP를 대체할 수 있는 포트)
3. 다이내믹/프라이빗 포트 번호 (49152 ~ 65535) : 특별히 용도가 지정되지 않았음. 어느 프로그램에서나 사용이 가능한 포트 번호.

# 회선 교환 방식

## 정의

기존 전화 시스템의 대표적인 통신 방식. 일대일 연결. 현재 유선 전화에서도 원리적으로 이 방식을 채택 중.

## 유선 전화의 통화 방식

### 옛날 통화 과정

1. 양쪽 마이크와 스피커, 그리고 송.수신을 위한 2개의 전선
2. 중간에 교환원이 걸려 온 번호에서 요청하는 번호를 보고 같은 교환대 번호인지 다른 교환대의 번호인지 확인하고 연결.

상위 교환대는 교환대별 연결을 처리 함으로써, 국내 전역과 해외까지 처리할 수 있다.

지역 번호, 시외 번호, 국가 번호 등 전화번호가 계층구조로 되어 있는 이유이다.

## 회선 교환 방식의 특징

회선 교환 방식의 가장 큰 특징은 **일대일** 연결이다.

이 일대일 연결 때문에 해당 회선은 통화를 하는 양측이 독점(통화 중 상태)하게 되고, 유지 보수 관리 비용이 든다.

그리고 통신량이 많아 질 수록 이 방식은 효율이 떨어지게 된다.

그래서 현재 통신은 대부분 디지털화 되어있고, 신호도 다중화되어 있다.


# 패킷 교환 방식

## 정의

데이터를 패킷 단위로 일정하게 분할해서 전송하는 통신방식. 인터넷, 이더넷 등 많은 네트워크에서 채택한 방식이다.

## 패킷 교환 방식의 원리와 장점

### 원리

1. 패킷의 크기는 프로토콜마다 다르다.
2. 패킷의 크기를 일정하게 분할해서 전송한다.
3. 회선을 독점하지 않고 회선 내에서 독립적인 타이밍에 전송한다.
4. 상대와 연결을 설정하는 절차가 없다.

### 장점

1. 동시에 대량의 데이터를 전송할 수 있다.
2. 다수의 상대방과 효율적으로 데이터를 송수신 할 수 있다.
3. 서로 다른 종류(프로토콜)의 패킷이 혼재 할 수 있다. (다양성 증가)
4. 연결 일부에 장애가 발생해도 다른 경로로 송수신 할 수 있다.

### 단점

1. 회선 혼잡이나 액세스의 집중 등이 발생한다.
2. 패킷이 보낸 순서대로 도착한다는 보장이 없다.
3. 패킷이 오류로 사라질 수 있다.
4. 헤더 등 부가 정보의 처리나 크기가 필요하게 된다.
5. 실시간 전송을 할 수 없다. 아무리 빨리해도 저지연.

## 패킷 교환 방식에 필요한 정보

1. 같은 회선 내에 무수한 패킷이 이동하므로 관리 정보가 필요하다.
2. 출발지와 목적지에 대한 정보
3. 분할된 패킷이 목적지에 도착했을 때 재구성을 위한 정보 등

→ 이런 정보는 헤더에 집약되어 있다.

### 용어

- 관리 정보 : 분할된 패킷이 원래 데이터의 어느 부분에 해당하는지 나타내는 정보 등.

# 라우터

## 정의

IP 주소를 보고 목적지가 내부 LAN인지 외부 LAN인지 확인해서 패킷을 처리하는 장치

## LAN끼리 이어주는 라우터의 기능

### 과정

1. 패킷 내부의 헤더에 있는 목적지 정보를 해석한다.
2. 라우터 내부 LAN이 목적지라면 수신하여 처리
3. 외부의 LAN이라면 자신과 직접 연결된 라우터에 전송하여 처리 (그리고 그 정보가 직접 연결된 라우터의 것이 아니라면 그 라우터도 바로 옆 라우터에 전송한다.)

**그래서** 라우터에는 외부 LAN을 연결하는 포트(WAN 포트), 내부 LAN을 연결하는(LAN 포트)가 있다. 

## 라우터와 인터넷의 관계

라우터는 이처럼 LAN과 LAN을 연결해줘서 대규모 LAN이나 인터넷을 구성하는 장치이다.

전용선이나 ISP의 회선 등을 이용하면 먼 거리의 라우터와 연결할 수도 있다.

인터넷은 이런 원리로 **LAN을 광범위하게 연결한 것**을 의미한다.

TCP/IP가 기본 프로토콜, WAN(외부 LAN과 소통)쪽에서는 글로벌 IP 사용

### 용어

- 에지 라우터 : 내부 LAN과 외부 인터넷의 경계에 설치하는 라우터
- ISP : Internet Servie Provider

# 액세스 포인트

## 정의

각 단말기와 무선 연결을 설정하는 장치이다. 무선 LAN에서 허브에 해당한다. 

## 각 장치의 무선 연결을 설정하는 액세스 포인트

액세스는 포인트는 IEEE 802.11 시리즈의 무선 LAN 규격 (Wi-fi)이다.

## 인프라스트럭처 모드와 애드훅 모드

액세스 포인트는 유선 LAN의 L2 스위치에 해당하는 역할을 한다. 무선 LAN에 연결되는 각 기기들은 내장된 wi-fi 모듈을 통해 액세스 포인트에 연결되고 액세스 포인트는 세그먼트 내 통신을 제어한다. 이 것을 이르러 ‘인프라스트럭처 모드’라고 한다.

또한 각 기기들이 액세스 포인트를 거치지 않고 직접 무선 링크 기능을 사용해 통신하는 기술을 ‘애드훅 모드’라고 한다. (Ex 컴퓨터와 프린터를 연결할 때)

### 액세스 포인트와 Wi-fi 라우터의 차이

액세스 포인트는 무선 기기들을 묶어주는 역할을 하지만 인터넷에는 스스로 연결할 수 없다. 그래서 나온 것이 광대역 라우터와 Wi-fi 라우터이며 이 들은 액세스 포인트의 기능을 가짐과 동시에 라우터의 기능도 가지고 있어서 기기들을 묶어 인터넷에 연결시킬 수 있다.

액세스 포인트는 2계층 장치 vs Wi-fi 라우터는 3계층 장치

# 허브(집선 장치)

## 정의

허브는 다수의 회선을 정리해서 네트워크 접속을 확보하는 장치

## 각 장치의 회선을 모으는 허브

허브는 거점이란 뜻이다. 그 거점을 기반으로 여러 개의 회선을 모아 네트워크에 연결하는 것.

## 리피터와 스위치 기능도 갖고 있다.

허브는 뒷면에 연결 포트를 가지고 있으며 이 수 만큼 회선을 모을 수 있다. 4, 8 ,16 등.

캐스케이드 연결을 통해 연결 대수를 늘리기도 한다.

예전에는 집선기능만 있는 허브도 있었지만 지금은 거의 없다.

현재 대부분의 허브는 전원을 필요로 하며, 신호를 증폭하는 리피터 기능을 갖추었고, 전자회로나 CPU를 장착하여 이더넷 프레임을 해석하고 고도의 연결 전환을 수행하기도 한다.

이런 기능을 가진 허브는 사실상 스위치인데, 전통의 허브와 구분하기 위해 스위칭 허브라고도 한다.

# 스위치(스위칭 허브)

## 정의

회선을 모으는 기능 + 연결 대상을 전환하는 기능 + 세그먼트 분할 or 묶기 기능

## 연결 대상을 전환하는 기능을 가진 스위치

스위치는 연결 대상을 전환하는 기능을 추가로 가진 허브이다. 2계층이고 원칙적으로 이더넷 프레임을 처리한다.

스위치를 사용하면 이더넷 프레임의 충돌을 방지하거나 불필요한 이더넷 프레임 등을 억제할 수 있다.

## 스위치로 세그먼트를 분할할 수 있다.

스위치는 2계층에서 연결하는 장치여서 L2 스위치라고도 한다.

IP 주소에 의한 라우팅 기능을 가진 3계층에서 연결하는 스위치는 L3 스위치라 한다.

L3 스위치는 라우터와 기능이 거의 동일하다.

둘의 차이점은 L3 스위치가 더 고속인 점, 포트 수가 많은 제품이 있다는 점 등이다.

### 세그먼트 분할 or 묶기

L3 스위치는 CPU를 탑재하고 있기 때문에, 임의의 포트를 지정해서 세그먼트를 나눌 수도 있다.

이 기능을 VLAN이라고 함.

# 케이블

## 정의

1. 이더넷용 케이블 : 일반적
2. 광섬유 케이블 : 고속 전송 스위치 or 10Gbps 이상의 네트워크 장비

## 직렬 케이블과 병렬 케이블

1. 직렬 케이블 : 1비트씩 전송
2. 병렬 케이블 : 8or16비트씩 전송 (오래된 프린터 or SCSI의 케이블)

## 네트워크에서 사용되는 케이블 규격

1. RS-232C(EIA-232-D) : 대부분의 컴퓨터에 있었지만, 현재는 랙에 들어가는 서버 라우터, 스위치에 콘솔을 연결할 때 사용됨.

1. 이더넷(IEEE 802.3 시리즈) 
    
    (1). 동축 케이블 규격
    
    (2). 스타형 이더넷 규격(주류)
    
2. 광섬유 케이블(ANSI/TIA-568.3-D) : 전송 경로 수에 따라 싱글모드와 멀티모드
    
    (1) OS1, OS2 : 전송 속도가 빠르고 파장이 길다. 전송 손실이 낮아 기간 통신망에 적합하다.
    
    (2) OM1 ~ OM5 : 전송 손실이 상대적으로 높다. 그러나 저렴하고 연결이 쉽다. 근거리 LAN에 사용하기 적합
    
    ### 용어
    
    1. SCSI : 하드디스크 등 외부 기억 장치의 인터페이스로 활용
    2. 광섬유 코어 : 빛을 투과하는 유리 섬유로 만들었다. 유리 섬유는 구부러져도 빛이 내부를 통과할 수 있다.
    3. 싱글모드 : 빛이 코어 안을 하나의 전송로로 **직진**
    4. 멀티모드 : 빛이 코어 안을 **굴절**하면서 다수의 전송로로 진행


    # 커넥터

## 정의

케이블의 연결부이다. 규격에 맞아야 네트워크에 장치를 연결할 수 있다.

## 이더넷에서 사용되는 커넥터 규격

1. RS-232C : D-sub 커넥터 (9핀인 D-sub 커넥터가 많이 사용된다.)
2. 이더넷 케이블 : RJ-45 커넥터 (접점이 8개다.)

## 광섬유 커넥터와 USB 커넥터

1. 광섬유 커넥터는 광신호를 주고 받아야 하기 때문에, 일반 네트워크 장치에는 연결할 수 없다.
    
    **왜냐하면**
    
    광신호를 전기신호로 변환해야 하기 때문. **SFP 트랜시버**를 사용하여 변환하며, 10Gbps 이상 고속으로 전송하는 스위치에는 SFP 포트가 있다.
    
2. USB 커넥터는 원래는 장치끼리 통신할 수 있는 규격. USB에는 1.1 2.0 등 규격이 있고 커넥터에는 TYPE-A, TYPE-C등이 있는데, 규격과 커넥터 종류는 연동되지 않습니다.(?)

### 용어

1. D-sub 커넥터 : 정식으로 D형의 초소형 커넥터를 의미. 접속면이 **사다리꼴**. 세로로 보면 D자로 보인다고 해서 붙여진 이름
2. SFP 트랜시버 : LAN 케이블과 광섬유 케이블을 스위치에 연결하고자 SFP 포트(범용 포트)에 연결하는 소형 소켓 모듈이다. 트랜시버는 트랜스미터와 수신기를 일체화시킨 것
3. USB : Universal Serial Bus. 전원 단자 + 전송용 신호선

# DHCP

## 정의

LAN내 장치에 IP 주소를 할당하는 프로토콜. 그러나 일반적으로는 라우터나 게이트웨이가 담당한다.

## IP 주소를 할당하는 DHCP

수동으로 IP 설정하는 것은 실수할 수 있으므로 주로 DHCP를 이용하여 IP를 자동 할당 받는다. 그리고 DHCP는 그 방식과 절차를 규정한 **클라이언트 서버 프로토콜**이다.

서버용 프로그램 : 라우터, 고기능 스위치, 리눅스 등에 있음.

클라이언트용 프로그램 : 주요 OS에 설치되어 있음

## IP 주소 자동 할당 절차

1. 클라이언트가 브로드캐스트로 DHCP 서버를 찾는 메시지를 보낸다.
2. DHCP 서버는 OK 사인을 클라이언트에게 보낸다.
3. 클라이언트는 DHCP 서버에게 IP 주소 할당 요청을 보낸다.
4. DHCP 서버가 클라이언트에게 정보를 발행한다.

### 용어

1. 클라이언트 서버형 : 컴퓨터 사용 형태 중 하나. 서버에 액세스 해서 서비스를 이용하는 컴퓨터를 클라이언트라 한다. 서버형는 특정 처리를 전문으로 하는 컴퓨터.

1. DHCP 서버 : IP 주소 외에도 서브넷 마스크, 기본 게이트웨이등도 있다.

1. 발행 : IP 주소 등 정보에는 유효기간을 설정할 수 있다. 발행된 시각부터 계산.

<aside>
💡 DHCP에게 자동할당 받은 IP 주소 등을 확인하고 싶을 때는 cmd 창에 ipconfig /all을 입력하여 수동으로 정보를 확인할 수 있다.

</aside>

# NAT/NAPT

## 정의

LAN 내부의 컴퓨터는 글로벌 IP 주소가 아닌 프라이빗 IP를 받으므로 인터넷을 사용하려면 IP를 변환해야 한다. 그때 필요한게 NAT와 NAPT이다.

## 할당된 글로벌 IP 주소를 사용하는 NAT

1. 기업등에 할당된 글로벌 IP와 각 장치에 설정된 프라이빗 IP 주소에 대응하는 **일대일 대응 변환표**를 작성한다.
2. 인터넷 액세스 요청이 있으면 변환표를 사용하여 글로벌 IP 주소를 해당 통신에 할당한다.
3. 할당받은 글로벌 IP 주소로 인터넷에 연결되면 대응하는 프라이빗 IP 주소의 장치로 IP 주소를 변환해서 통신.

## TCP/UDP 포트 번호도 이용하는 NAPT

사용할 수 있는 글로벌 IP 주소가 적을 때, 효율적으로 글로벌 IP 주소를 사용할 수 있게 해주는 기술

IP 주소 변환표 외에 **TCP/UDP의 출발지 포트 번호**도 사용.

동일한 글로벌 IP 주소라도 프라이빗 IP 주소마다 다른 포트번호를 할당한다면 어떤 컴퓨터인지 구분이 가능하다.

### 용어

1. 출발지 포트 번호 : UDP/TCP 의 헤더에는 목적지 출발지 포트 번호가 포함된다.
    
    출발지 포트 번호에는 송신자의 단말기 또는 앱을 특정하는 번호 지정
    
    목적지 포트 번호에는 접속할 곳의 앱을 지정한다.
    

# 라우팅

## 정의

데이터의 경로를 제어하는 기술이다.

 

## 경로를 제어하는 라우팅

### 라우터의 역할

1. 본 라우터 안팎의 교통정리 (내부 LAN이면 수신, 외부 LAN이면 다른 라우터로 이송)

1. 경로(루트)제어 : 최소한의 라우터를 경유해서 갈지, 돈이 적게 드는 경로로 갈지, 고장난 라우터를 회피해서 갈지 등. → 이런 경로 정보를 메트릭이라고 함.

## 라우팅 프로토콜의 종류

경로를 제어하고자 라우터끼리 정보를 교환하는 프로토콜.

1. IGP : 동일한 관리 정책의 라우터끼리 경로를 제어하는 프로토콜. **AS 번호**라는 식별자로 구별. 
    
    **LAN 내부 외부** 둘다 대상. AS 번호는 통신 사업자 및 공급자별로 할당 
    
2. EGP : AS의 라우팅 정보를 교환하는 프로토콜

정보의 취급 방법과 동작 방식에 따라 또 나뉨

1. 거리 벡터형 (IGP)(EGP) : 라우터 간 거리와 방향 테이블을 만들고 라우터 간에 공유한다.
2. 링크 스테이트형 (IGP) : 라우터의 링크 상태를 데이터베이스화해서 경로를 판단한다.
3. 하이브리드형 (IGP) : 거리 벡터형 + 링크 스테이트형
4. 경로 벡터형 (EGP) : 거리 및 방향과 우선순위 등 속성 정보로 라우팅 테이블을 관리한다.

### 용어

1. 관리 정책 : 자사나 자체 조직이 관리하는 네트워크의 세그먼트 구성이나 분할 방법 등을 결정하는 기준이나 절차다.

1. AS 번호 : 동일한 관리 정책이 적용되는 네트워크 단위에 할당하는 ID 번호. IP 주소를 관리하는 IANA에서 관리한다.

1. 라우팅 테이블 : 메트릭 + 목적지 정보

# 기본 게이트웨이

## 정의

내부 LAN으로 전송되는 패킷이나 외부 LAN으로 가는 패킷도 아닌 미지의 패킷이 라우터에 왔을 때, 폐기하지 않고 처리해 주는 사고방식(?)

## 미지의 패킷을 처리하는 원리

### 라우터가 처리하는 패킷

1. 내부 LAN으로 오는 것
2. 외부 LAN으로 가는 것 (라우팅 테이블을 통해)
3. 미지의 패킷 : 기본 게이트웨이가 없다면 폐기

하지만 기본 게이트웨이가 전송한 곳을 지정해주므로 폐기하지 않는다.

## 기본 게이트웨이의 IP 주소

라우터에 소속된 LAN 내 각 장치의 기본 게이트웨이는 라우터의 IP 주소를 지정.

**L2 스위치**에 연결된 장치들의 기본 게이트웨이는 외부의 라우터의 IP 주소를 지정할 수 있음 (상위 or 엣지 라우터)

### 용어

1. 전송할 곳 : 다른 라우터나 서버 등을 의미.

# 서브넷

## 정의

하나의 네트워크를 여러 개의 세그먼트로 분할한 것 또는 어떤 네트워크의 하나하나의 세그먼트를 서브넷이라고 한다.

## 네트워크를 분할하는 방식

IP 네트워크에서는 IP 주소 상위 **1비트 ~ 5비트** 패턴에 따라 주소 영역을 클래스 A~E로 나눈다.

클래스 A : 네트워크부 1 호스트부 3

클래스 B : 네트워크부 2 호스트부 2

클래스 C : 네트워크부 3 호스트부 1

클래스 D,E : 네트워크부 4 호스트부 0 → 특수 용도 주소

1. 클래스 방식 : 글로벌 IP 주소의 배포 단위로 이용되었으나, 배포의 낭비가 많다.

1. **CIDR 방식** : 네트워크부(클래스 부분)과 호스트부(주소 부분)으로 이루어짐
    
    (1). 네트워크부 : 네트워크를 대표하는 주소
    
    (2). 호스트부 : 해당 네트워크 내에서 사용할 수 있는 개별 주소 범위
    

## 네트워크부와 호스트부를 나타내는 방식

CIDR 방식으로 분할한 네트워크가 서브넷.

네트워크부와 호스트부 구분은 서브넷 마스크로 한다.

개별 호스트의 IP 주소만 봐서는 서브넷 구분이 몇 비트째인지 알 수 없다.

고로 IP 주소 뒤에 슬래쉬와 네트워크부의 비트수를 붙인 프리픽스 표기로 나타낸다.

(Ex 192.168.100.20/24 네트워크부가 24비트. 호스트부 8비트)
