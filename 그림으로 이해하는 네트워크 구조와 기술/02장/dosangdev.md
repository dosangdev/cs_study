# 데이터를 주고받는 원리를 알아보자

## 1. 프로토콜🤙 == 약속

### 통신규약인 프로토콜

- 프로토콜
  - '어느 부분이 목적지 데이터인지, 어느 부분이 신호 데이터 인지, 어디서부터 어디까지가 주고받고자 하는 데이터 본체인지'의 대한 약속
  - 같은 프로토콜이면 다른 기기 간에도 통신 가능(프로토콜이 다르면 같은 기기도 통신x)

#### 프로토콜의 종류

    - IEEE 802.3: IEEE가 규정하는 이더넷 규격의 프로토콜. 랜 케이블 등이 사용됨
    - IEEE 802.11: IEEE가 규정하는 무선 LAN 규격의 프로토콜. Wi-Fi로 보급되어 있음
    - IP(internet Protocol): 여러 네트워크를 연결하는 프로토콜. 인터넷을 구성하고 있음
    - ARP(address Resolution Protocol): IP 주소에서 각 기기가 갖고 있는 MAC주소를 알아내는 프로토콜
    - TCP(Transmission Control Protocol): 인터넷 등에서 상위 계층과 신뢰성을 높여 통신하는 프로토콜
    - UDP(User Datagram Protocol): 인터넷 등에서 상위 계층과 속도와 편의성을 우선하여 통신하는 프로토콜
    - POP(Post Office Protocol): 이메일 수신 프로토콜
    - SMTP(Simple Mail Transfer Protocol): 이메일 송신 프로토콜
    - HTTP(Hypertext Transfer Protocol): 웹 브라우저와 웨 서버 간 통신 프로토콜
    - DNS(Domain Name System): DNS서버에서 IP주소를 문의해서 도메인 이름을 IP주소로 변환하는 프로토콜

<hr/>

## 2. 네트워크 계층

#### 효율적으로 통신하기 위한 계층구조

### 계층별로 나누어 처리해서 낭비를 없앤다

    상대방이 내가 보낸 이메일을 볼 때 사용되는 네트워크, 프로토콜, OS, 애플리케이션은 다 다르다.
    각 애플리케이션에서 데이트터를 변환하고 송수신하는 과정까지 전부하면 프로그램은 정말 복잡해지고 낭비도 많아질 것이다.
    --> 네트워크를 하드웨어, 프로토콜, 애플리케이션이라는 계층(레이어)로 나누어 처리 분담.

### 프로토콜 스택의 처리 원리

    프로토콜의 차이는 프로토콜 스택이라는 계층 구조를 이용해 처리

- 프로토콜
  - 헤더: 프로토콜 정보, 예를 들어 우편물 주소나 종류 같은 정보
  - 페이로드: 전송하려는 데이터 그 자체
    하위 계층 프로토콜의 페이로드에 상위계층의 헤더와 페이로드 포함
    -> 해당 프로토콜 계층은 자신의 헤더 정보만 해석해서 페이로드를 상위 네트워크에 전달
    -> 페이로드는 상위계층의 헤더와 페이로드로 되어있기 때문에 상위 네트워크의 프로토콜이 제대로 처리가능

<hr/>

## 3. 네트워크 모델

#### 각 기기가 통신하는 계층의 모델

### 프로토콜을 7개로 나눈 OSI 참조 모델

    OSI참조모델은 ISO에서 제정한 네트워크 계층 모델
    7계층으로 나뉘어 있음
    현재는 그대로 사용x
    계층 구조로 만들면 애플리케이션은 연결되는 컴퓨터나 케이블의 차이를 처리할 필요x-> 장비나 소프트웨어 개발이 용이
    계층으로 분리되므로 시스템을 프로토콜 스택개념으로 설계와 개발을 할 수 있다.
    인터넷이 컴퓨터나 스마트폰에서 동일하게 엑세스할 수 있는 이유는 네트워크 계층 구조와 프로토콜 스택덕분이다.

- 각각의 계층, 주요 프로토콜과 규격
  - 7(응용계층): SMTP, POP, HTTP, DNS, FTP 등(이메일, 웹 브라우저 등 앱 수준의 규약이나 데이터를 처리)
  - 6(표현계층): SMTP, 텔넷, FTP 등(문자 코드, 이미지, 동영상 포맷 등을 처리)
  - 5(세션계층): TLS 등(특정 통신 대상과 계속적인 연결상태를 관리)
  - 4(전송계층): TCP, UDP 등(특정 통신 대상으로 보낼 개개의 데이터 전송을 처리)
  - 3(네트워크계층): IP, ARP, RARP, ICMP 등(네트워크 내의 세그먼트 간 통신을 처리)
  - 2(데이터 링크 계층): PPP(다이얼업 연결), IEEE 802.3(이더넷), IEEE 802.11(무선 LAN) 등(세그먼트 내 컴퓨터나 스위치, 리피터 등과 연결을 처리)
  - 1(물리계층): RS-232C, EIA-422(트위스트 페어 케이블), EIA 카테고리(LAN케이블),광섬유 등 (케이블, 커넥트, 미디어 등의 차이를 처리)

### 4계층으로 생각하는 TCP/IP 모델

    인터넷을 기준으로 한 네트워크 통신 모델
    4계층으로 나뉘어 생각
    1,2계층을 1계층(네트워크 인터페이스 계층)
    3계층을 2계층(인터넷 계층)
    4계층을 3계층(전송계층)
    5,6,7계층을 4계층(응용계층)

<hr/>

## 4. TCP/IP

#### 인터넷으로 통신하기 위한 프로토콜

    TCP/IP는 인터넷에서 통신할 때 사용하는 기본 프로토콜

### 출발지와 목적지가 적힌 IP 프로토콜

- 프로토콜 분류
  - IP 프로토콜: UDP,TCP,HTTP 등 다른 프로토콜의 기본
    IP주소(출발지, 목적지 정보)를 참조하여 페이로드를 올바른 목적지에 전송하는 최소한의 절차와 규칙을 규정
    페이로드엔 UDP, TCP뿐만 아니라 상위계층의 프로토콜 데이터가 저장
  - UDP 프로토콜
  - TCP 프로토콜
    TCP/IP는 통신하는 패킷의 식별자로 IP주소를 사용하기 때문에 보통 'TCP/IP'라고 표현

### UDP 프로토콜과 TCP 프로토콜

    공통점: 식별자로써 각각 헤더에 포트번호를 부여해서 IP주소가 나타내는 사용자나 애플리케이션 종류 등을 지정

    UDP 프로토콜: 프로토콜은 포트번호를 부여, 처리과정은 IP프로토콜과 거의 똑같다
                수신 확인,전송 오류 확인, 재전송 처리 등은 수행x
                단순히 목적지맘ㄴ 지정해서 전송하는 데이터를 데이터그램(datagram)이라고 한다.

    TCP 프로토콜: 헤더에 포트번호가 부여됨
                오류 검사, 재전송 처리 등 일련의 과정도 규정되어있음
                세션 통신을 수행하는 기능있음
                헤더엔 오류 검사, 세션 통신에 필요한 정보(시퀀스 번호, 응답 확인 번호, 세션플래그 등)가 부여됨

- 용어 노트
  - 식별자: 대상을 식별하는 부호. ex) 패킷의 목적지를 식별하는 것은 목적지 IP 주소가 된다.
  - 세션: 목적지로 연결을 확인하고 통신 경로를 확보 및 유지하는 것이다
  - 세퀀스 번호: 큰 데이터를 여러 개의 패킷으로 분할할 때 사용하는 패킷 번호
  - 응답 확인 번호: 시퀀스 번호가 맞는지 확인하는 번호. 자기 다음에 와야하는 시퀀스 번호가 들어감
  - 세션 플래그: TCP 세션의 상태를 나타내는 다양한 플래그를 으의미

#### cf. 프로토콜의 용도

    - UDP 프로토콜: 신뢰성보단 속도와 편의성을 우선시해야 할 때 사용됨
    - TCP 프로토콜: 안정적인 통신을 원할 때 사용됨
    IP, UDP 프로토콜에서도 상위 애플리케이션에서 오류 검사 및 재전송 처리 등을 수행해서 기능을 보완할 수 있다.

## 5. IP 주소

- IP 주소
  - 출발지나 목적지를 식별하는 주소로 사용되는 데이터
  - 글로벌 IP와 프라이빗 IP로 나뉨

### IP 주소의 구조

- IP 주소는 IPv4와 IPv6 두 가지 버전이 있음
- 32비트로 된 데이터(32비트를 8비트씩 4등분해서 8비트의 10진수로 표시할 때 점으로 구분해서 표기. 이때 8비트(1바이트) 단위를 네트워크에선 옥텟(octet)이라 한다.)
- 43억 개 주소를 표현, 사용할 수 있음(but 실제로 주소 공간을 43억 개 모두 사용 불가)

cf. 43억개의 주소를 다 사용 못하는 이유

주소의 낭비: IPv4 주소 중 일부는 특별한 목적을 위해 예약되어 있거나 특정 용도로 사용되고 있습니다. 예를 들어, 특정 네트워크에서 사용할 주소 범위, 브로드캐스트 주소, 멀티캐스트 주소, 예약 주소 등이 있습니다. 이러한 특수한 용도로 예약된 주소들 때문에 실제 사용 가능한 주소 수는 더 적습니다.

주소 고갈 문제: 43억개의 주소도 처음에는 충분했지만, 인터넷 사용자와 기기의 급격한 증가로 인해 IPv4 주소 고갈 문제가 발생했습니다. 많은 기업과 개인이 인터넷에 연결되면서 사용 가능한 주소가 빠르게 소진되었습니다.

이러한 이유로 IPv6(인터넷 프로토콜 버전 6)가 도입되었습니다. IPv6는 128비트 주소 체계를 사용하며, 이로써 상당히 큰 주소 공간을 제공하여 주소 부족 문제를 해결하고 미래에 대비하고 있습니다. IPv6는 IPv4보다 훨씬 많은 주소를 가지고 있어, 새로운 기기 및 네트워크의 증가에 대응할 수 있습니다.

### 글로벌 IP주소와 프라이빗 IP 주소

- 글로벌 IP 주소
  - IP주소의 주소 공간 중 인터넷 주소로 사용할 수 있는 것(이 주소를 가진 기기는 인터넷상에서 하나 -> 이 주소를 지정하면 전세계 기기와 통신할 수 있음)
- 프라이빗 IP 주소
  - 인터넷에서 사용할 수 없는 주소(인터넷에 직접 연결되지 않는 LAN 내부등의 주소 공간에서 사용)
  - 인터넷에서 사용x -> LAN마다 중복되지 않게 관리하면 다른 사무실이나 LAN에서 같은 IP 주소를 사용해도 괜춘!

<hr/>

## 6. Ipv4 / IPv6

### Ipv4 / IPv6의 차이점

    차이점: IP주소의 길이

- IPv4: 4옥텟(32비트) 43억 개
- IPv6: 16옥텟(128비트) 2^128 = 340,282,366,920,938,463,463,374,607,431,768,211,456. 약 340간 개 (무수히 많은 주소공간)
  - 서로의 호환성이 없으므로 IPv6로 연결하려면 IPv6가 호환되는 앱이나 서비스를 사용해야함
  - 윈도, macOS, 리눅스등 지원.
  - 구글, 페이스북, 구글 크롬, 마이크로소프트 엣지, DNS도 지원(사용자가 IPv6인지 알 필요x)

### 암호화 통신 등의 특징이 있는 IPv6

**IPv6의 특징**

- 프로토콜 수준애서 암호화 통신이 규정되어 있다.
- MAC 주소를 이용하여 IPv6주소를 자동으로 생성할 수 있고, 2계층을 포함한 설정 자동화가 가능.
- 헤더가 IPv4 보다 단순해서 처리가 간단.
- 계층 구조가 엄격하여 라우팅 효율이 좋다.

현재 IPv4, IPv6패킷은 혼재되어있고 IPv4가 금지된 게 아니니 전 세계 서버 및 웹서비스 등은 IPv4기반으로 동작.

<hr/>

## 7. MAC 주소

###### MAC주소는 네트워크에 연결되는 기기나 단말기가 고유하게 가지는 식별자

### 주소의 구조

- MAC 주소
  - 컴퓨터의 네트워크 카드, 스마트폰, 라우터, 스위치, IoT 가전제품 등 네트워크에 연결되는 모든 기기에 하나씩 부여되는 식별자
  - 48비트 길이의 식별자
  - IEEE(미국전기전자학회)와 각 기기 제조사가 관리
  - 48비트 중 상위 24비트를 벤더 코드(OUI 식별자)로 제조사에 할당. 제조사는 여러 개의 벤더 코드를 가질 수 있다.
  - 하위 24비트(노드 번호)는 각 제조사의 책임하에 제품에 하나씩 할당
  - 48비트로 주소를 약 280조 개 표현 가능
  - 벤더 코드만 해도 140조 개, 하나의 벤더 코드로 시리얼 넘버를 140조 개 표현 가능

### MAC 주소와 IP주소의 차이

공통점: 프로토콜에 사용되는 식별자
차이점: 사용되는 계층이 다르다.

- MAC주소
- OSI참조모델에서 2계층(이하)의 식별자
- 이더넷 프레임에서 장치나 단말기의 식별자로 사용됨(이더넷은 2계층(데이터 계층))

- IP주소
  - TCP/IP프로토콜에서 출발지나 목적지의 장치나 네트워크 식별자로 사용
  - 3계층(이상)의 식별자(TCP/IP나 인터넷은 OSI참조 모델에서 3계층 이상의 계층)

**용어 노트**

- 네트워크 카드: 이더넷 등 LAN프로토콜과 컴퓨터나 서버 내 공통 버스 신호(CPU, 메모리, 입출력 기기가 서로 데이터 교환을 실시할 수 있는 신호선 규격)의 프로토콜 변환 및 신호 변환을 수행하는 하드웨어

- 벤더 코드
  - MAC 주소의 상위 3바이트 부분을 의미
  - IEEE에서 기업마다 고유 부호를 할당
  - 대기업은 복수의 벤더 코드를 갖는 경우가 있다

**벤더코드가 필요한 이유**

"벤더코드(Vendor Code)"는 특정 하드웨어 또는 소프트웨어 제조업체를 식별하는 데 사용되는 고유한 식별 코드입니다. 이 코드는 주로 하드웨어 장치, 네트워크 장비, 소프트웨어 등의 제조사를 구분하기 위해 사용됩니다. 벤더코드가 왜 필요한지에 대한 몇 가지 이유는 다음과 같습니다:

1. 장비 식별과 호환성: 벤더코드를 사용하면 특정 장비의 제조사를 식별할 수 있습니다. 이는 운영체제나 다른 소프트웨어가 특정 벤더의 장치와 원활하게 상호 작용할 수 있도록 하고, 호환성을 유지하는 데 도움이 됩니다.

2. 제조사 지원 및 유지보수: 벤더코드를 통해 제조사는 자신의 제품에 대한 지원 및 유지보수를 제공할 수 있습니다. 고객이 문제를 보고할 때 어떤 제조사의 제품이고, 어떤 모델인지 식별할 수 있으므로 정확한 지원을 제공할 수 있습니다.

3. 네트워크 식별: 네트워크 장비에서도 벤더코드는 네트워크의 토폴로지를 파악하고, 각 장비의 제조사를 확인하는 데 사용될 수 있습니다. 이는 네트워크 관리자에게 중요한 정보를 제공합니다.

4. 보안 및 관리: 벤더코드는 보안 정책을 시행하거나 특정 벤더의 제품을 관리하기 위해 사용될 수 있습니다. 보안 정책에 따라 특정 벤더의 제품만을 허용하거나 차단하는 등의 조치를 취할 수 있습니다.

5. 표준화와 규격 준수: 특정 산업이나 표준화 기구에서는 벤더코드를 사용하여 규격 준수를 관리하기도 합니다. 예를 들어, IEEE에서는 MAC 주소 체계를 통해 벤더코드를 할당하여 각 장치의 제조사를 식별합니다.

요약하면, 벤더코드는 정보 기술 환경에서 각종 장비와 소프트웨어를 식별하고, 관리, 유지보수, 보안 등의 다양한 목적을 위해 사용됩니다.

| 구분      | MAC 주소    | IP주소                     |
| --------- | ----------- | -------------------------- |
| 프로토콜  | 이더넷      | TCP/IP                     |
| 계층      | 2계층 이하  | 3계층 이상                 |
| 식별대상  | 단말기      | 네트워크 호스트            |
| 길이      | 48비트      | IPv4:32비트, IPv6: 128비트 |
| 식별자 수 | 약 280조 개 | 약 43억 개(IPv4)           |
| 관리 단체 | IANA        | IEEE                       |

<hr/>

## 8. ARP

**APR은 IP주소에서 해당 장비의 MAC주소를 확인 하는 프로토콜(IP주소 정보를 전송하고 특정 대상과 통신하기 위해 질의)**

### 장치의 MAC주소를 조사하는 ARP

일반적인 LAN에선 허브나 라우터가 네트워크를 묶는다. 이 네트워크에서 각 장치 연결은 이더넷을 사용하지만, 연결된 장치에서 실행되는 애플리케이션은 TCP/IP 프로토콜을 사용(3계층 이상)

장치 간 통신엔 MAC주소가 필요하지만, MAC주소는 2계층 이하이므로 애플리케이션 IP주소를 알고 있어도 MAC주소를 모른다.
LAN에서 **패킷**을 교환하려면 해당 IP주소가 LAN 내 어느 MAC주소를 가진 장치의 것인지 확인하고 이더넷 프레임을 구성해야함.
--> 이때 사용되는 게 **ARP**(IP 주소 정보를 네트워크로 내보내면 알고 있는 장치가 MAC주소를 알려준다.)

### ARP의 작동방식

1. ARP 요청 (ARP Request): 컴퓨터가 특정 IP 주소에 대한 MAC 주소를 모를 때 ARP 요청 패킷을 생성합니다. 이 패킷에는 목표 IP 주소가 포함되어 있습니다. ARP 요청은 브로드캐스트로 전송되므로, 네트워크에 있는 모든 장치가 이 패킷을 수신합니다.

2. ARP 응답 (ARP Reply): ARP 요청을 수신한 장치 중에서 목표 IP 주소를 가진 장치는 자신의 MAC 주소를 ARP 응답 패킷에 담아 송신합니다. 이 응답 패킷은 목표 IP 주소를 요청한 컴퓨터에게 직접적으로 전송됩니다.

3. ARP 테이블 업데이트: ARP 응답을 받은 컴퓨터는 수신한 MAC 주소를 ARP 테이블에 저장합니다. 이 테이블은 이후에 동일한 목표 IP 주소에 대한 통신 시에 MAC 주소를 바로 알 수 있도록 도와줍니다.

브로드캐스트 패킷이 모든 장치에게 전송되지만, ARP 응답은 목표 IP 주소를 가진 장치에게만 전송됩니다. 다른 장치들은 수신한 ARP 응답을 무시합니다. 이러한 방식으로 ARP는 목표 IP 주소와 해당하는 MAC 주소를 동적으로 매핑하고 네트워크에서 효율적인 통신을 가능케 합니다.

**이더넷**

이더넷(Ethernet)은 네트워크 기술 중 하나로, 컴퓨터 및 네트워크 장비 간에 데이터를 주고받을 수 있도록 하는 표준화된 유선 통신 기술입니다. 이더넷은 주로 로컬 에어리어 네트워크(Local Area Network, LAN)에서 사용되며, 네트워크의 표준 통신 프로토콜로 널리 알려져 있습니다.

이더넷은 OSI 모델에서 데이터 링크 계층과 물리 계층에서 동작합니다. 데이터 링크 계층에서는 프레임(Frame)이라는 패킷 단위로 데이터를 전송하고, 물리 계층에서는 케이블이나 광섬유와 같은 물리적인 매체를 통해 전기 신호나 빛 신호로 데이터를 전송합니다.

이더넷은 초기에는 10Mbps(메가비트/초) 속도로 시작되었지만, 기술의 발전과 네트워크 요구의 증가에 따라 100Mbps, 1Gbps, 10Gbps, 100Gbps와 같이 다양한 속도의 이더넷이 개발되었습니다. 또한, 유선 랜뿐만 아니라 무선 랜(Wireless LAN)에서도 이더넷 기술을 기반으로 한 표준이 적용되고 있습니다.

이더넷은 매우 널리 사용되어 있으며, 대부분의 컴퓨터와 네트워크 장비가 이 기술을 지원하고 있습니다. 이더넷은 간단하면서도 효과적인 네트워크 통신을 제공하며, 네트워크의 규모에 따라 다양한 속도와 설정으로 사용됩니다.

**기본 게이트웨이**
기본 게이트웨이는 컴퓨터나 네트워크 장치가 다른 네트워크로 향하는데 사용되는 포인트를 나타냅니다. 주로 이더넷이나 TCP/IP 네트워크에서 사용되며, 특정 네트워크와 다른 네트워크를 연결하는 역할을 합니다.

기본 게이트웨이의 역할

1. 다른 네트워크로의 라우팅: 컴퓨터나 네트워크 장치가 다른 네트워크로 통신하려면 기본 게이트웨이를 통해 해당 네트워크로 데이터를 전송해야 합니다. 기본 게이트웨이는 다른 네트워크로의 라우터 또는 게이트웨이 장치를 가리킵니다.

2. 인터넷 액세스: 일반적으로 기본 게이트웨이는 인터넷으로의 연결을 제공합니다. 컴퓨터가 인터넷에 액세스하려면 기본 게이트웨이가 설정되어 있어야 합니다.

3. 패킷 라우팅: 기본 게이트웨이는 컴퓨터가 알지 못하는 네트워크로의 패킷을 라우팅하는 역할을 합니다. 컴퓨터가 특정 목적지 IP 주소로 향하는 패킷을 보낼 때, 기본 게이트웨이는 해당 패킷을 적절한 방향으로 라우팅하여 목적지에 도달하도록 도와줍니다.

기본 게이트웨이는 주로 네트워크 설정에서 수동으로 설정되며, 올바르게 구성되어 있어야 컴퓨터가 다른 네트워크 및 인터넷과 통신할 수 있습니다.

<hr/>

## 9. 포트번호

포트 번호는 컴퓨터 네트워크에서 프로세스 간에 서비스를 식별하고 구분하기 위해 사용됩니다. 여러 프로세스가 동시에 실행되는 컴퓨터나 서버에서 특정 프로세스에 대한 통신을 관리하기 위해 포트 번호가 할당됩니다. 이러한 포트 번호를 사용하는 이유는 다양합니다:

1. **프로세스 식별**: 하나의 컴퓨터나 서버에서 여러 프로세스가 동시에 실행될 수 있습니다. 포트 번호를 사용하면 어떤 프로세스가 어떤 포트를 사용하고 있는지를 식별할 수 있습니다.

2. **다중 서비스 지원**: 하나의 서버에서 여러 서비스를 제공할 수 있습니다. 예를 들어, 웹 서버는 HTTP 서비스를 제공하는데, FTP 서버는 파일 전송 서비스를 제공합니다. 포트 번호를 사용하면 이러한 다양한 서비스를 동시에 지원할 수 있습니다.

3. **포트 별 보안 및 제어**: 각 포트에 특정 서비스나 프로세스가 할당되기 때문에, 포트 단위로 보안 정책을 설정하고 트래픽을 제어할 수 있습니다. 특정 포트로의 액세스를 허용하거나 차단하는 방식으로 네트워크 보안을 강화할 수 있습니다.

4. **프로토콜 기반 통신**: 여러 프로토콜이 동시에 사용될 때 포트 번호를 통해 어떤 프로토콜을 사용하는지를 구분할 수 있습니다. 예를 들어, TCP와 UDP는 같은 IP 주소에서 서비스를 제공할 수 있지만, 각각의 프로토콜은 다른 포트를 사용하여 서로 다른 서비스를 나타냅니다.

종합적으로 포트 번호는 **네트워크에서 효율적인 통신** 및 **서비스 식별**을 위한 중요한 구성 요소입니다.

#### 포트번호의 필요성

LAN 내 말단 컴퓨터까지 글로벌IP 주소가 할당되어 있다면 출발지 포트 번호가 필요하지 않을 수도 있습니다. 하지만 실제 LAN 내 IP 주소는 프라이빗 IP주소이며, 인터넷에서는 라우터나 서버 등 LAN을 구성하는 장치까지만 특정할 수 있습니다. 따라서 포트번호가 필요합니다.
-->글로벌 IP 주소는 LAN 내의 각 컴퓨터를 식별하는 데 사용되지만, 포트 번호는 컴퓨터 내에서 실행 중인 여러 애플리케이션을 구분하고 효율적으로 통신할 수 있도록 해준다.

### 포트 번호의 역할

- TCP/UDP 프로토콜에서 추가되는 식별자
- TCP/UDP헤더의 처음 16비트(2옥텟)정보, 16비트(0~65535)로 나타낼 수 있다.
- 포트 번호에는 목적지 포트 번호와 출발지 포트 번호가 있다

- 목적지 포트 번호

  - IP주소는 목적지 서버를 지정할 수 있다 but 해당 서버의 어떤 앱을 사용할지는 지정x
  - 목적지 포트 번호는 패킷이 어떤 애플리케이션을 위한 것인지 나타내는 번호로 지정됨
  - 서버선 수신한 패킷이 이메일, 웹 서버 등 어떤 요청인지 목적지 포트 번호를 보고 판단한다.

- 출발지 포트 번호
  - 패킷을 보낸 쪽 사용자와 터미널을 식별하는 번호를 지정
  - 어디에서 온 패킷인지는 출발지 IP 주소로 알 수 있지만, 출발지에서도 이메일을 보낸 계정이나 웹 사이트에 액세스한 기기 등을 식별할 필요가 있다.

### 주요 애플리케이션의 번호 - 잘 알려진 포트

- 포트번호
  - 원칙: 송수신 양쪽에서 합의돼 있다면 0~65535 사이의 어떤 번호든 사용 가능
  - 관례: 0~1023을 할당(**잘 알려진 포트**(well - known port))
  - 1024~49151(**등록된 포트 번호**)는 기존 애플리케이션에서 보조적으로 사용
  - 49152~65535(**다이내믹/프라이빗 포트 번호**)는 개인이나 기업이 자체 애플리케이션이나 서비스용으로 자유롭게 사용 가능

#### 용어노트

- TCP 프로토콜: 세션의 확립, 패킷이 올바른 목적지에 도착했는지 확인 등 신뢰성을 높여서 통신한다.
- UDP 프로토콜: 신뢰성보단 속도나 편리성을 우선시함.
- 잘 알려진 포트: 이메일, DNS 등 인터넷의 핵심 서비스에 할당된 특정 포트 번호다.
- 등록된 포트 번호: 잘 알려진 포트 이외의 주요 공급 업체 제품 및 앱에 할당된 포트 번호다.

| 포트번호 | 프로토콜 및 서비스 | 개요                                                                   |
| -------- | ------------------ | ---------------------------------------------------------------------- |
| TCP/20   | FTP(데이터)        | 클라이언트 와 서버 간 파일을 주고 받는다.                              |
| TCP/21   | FTP(프로토콜)      | FTP로 파일을 송수신할 때 서버에 로그인 처리 등을 한다                  |
| TCP/22   | SSH                | 암호화 통신으로 보호된 원격 로그인이다.                                |
| TCP/23   | 텔넷               | 원격 로그인(비추천)이다.                                               |
| TCP/25   | SMTP               | 메일 서버에 이메일을 보낸다.                                           |
| TCP/53   | DNS                | DNS 서버에 IP 주소를 문의한다.                                         |
| TCP/67   | DHCP(서버)         | IP 주소 자동 할당을 관리하는 서버다.                                   |
| TCP/68   | DHCP(클라이언트)   | DHCP가 자동으로 IP 주소를 할당하는 기기(네트워크 호스트)다.            |
| TCP/80   | HTTP               | 웹 브라우저와 웹 서버 사이에서 통신한다.                               |
| TCP/110  | POP3               | 자신에게 온 이메일을 메일 서버에서 확인하고 내려받는다.                |
| TCP/123  | NTP                | 컴퓨터 내부 시계를 표준 시간과 동기화한다,                             |
| TCP/143  | IMAP               | 자신에게 온 이메일을 메일 서버에서 확인한다(이메일은 서버에 보관된다). |
| TCP/443  | HTTPS              | 암호화 통신으로 세션이 보호된 HTTP통신이다.                            |

<hr/>

## 10. 회선 교환 방식 - 유선 전화에서 사용되는 일대일 연결 방식

- **회선교환**
  - 기존 전화 시스템으로 대표되는 통신 방식의 명칭
  - 통신 상대와 일대일 연결을 설정해서 통신하는 방식
  - 현재에도 유선 전화에서는 원리적으로 이 방식을 채택

### 유선 전화의 통신 방식

- 전화: 음성을 마이크로 아날로그 신호로 바꿈 -> 이를 전선에 실어 보내 상대방 스피커에서 재생하는 장치
- 양쪽에 마이크와 스피커, 송수신을 위한 전선 2개만 있으면 통화 가능
- 중간에서 **교환원**이 개입하여 걸려온 번호와 지정한 번호의 전선을 연결시켜줌.
- **교환대**까지 선을 깔아 놓으면 그 교환대에 연결된 상대 누구와도 통화 가능
- 교환대에 다른 지역의 교환대와 연결하는 포트를 추가하면 그 지역과도 연결 가능
- **상위 교환대**는 지역 내 교환대별 연결을 처리 --> 국내 전역과 해외까지 커버 가능(전화번호가 계층구조로 되어 있는 이유)
- 현재
  - 전화번호의 신호(**펄스**나 **톤**)를 식별해 기계나 컴퓨터가 연결을 처리
  - 중간 회선으로 마이크로웨이브 등 무선 기술, 디지털 회선, 광섬유 등이 사용되지만 기본 원리는 동일
    --> **회선 교환 방식**

### 회선 교환 방식의 특징

- 일대일 연결을 설정 -> 해당 회선은 양측이 독점(통화 상태)
- **교환기** 구성이 복잡해지고 회선 유지 보수 및 관리에 비용이 들어감
- 통신량이 방대해지면, 하나의 통신에 하나의 회선을 전용으로 쓰는 방식 -> 효율x
- 현재
  - 지역 전화국 이후의 통신은 대부분 디지털화되어있고 신호도 다중화돼 있음

<hr/>

## 11. 패킷 교환 방식 - 데이터를 분할해서 전송하는 통신 방식

### 패킷 교환 방식의 원리와 장점

- 패킷: 주고받는 데이터 단위
  - 교환 방식: 데이터를 주고 받을 때 일정한 크기로 분할해서 전송
  - 패킷의 크기: 프로토콜에 따라 정해짐
  - 장점
    - 매번 상대방과 회선 연결 필요x -> 연결돼 있으면 데이터를 독립적인 타이밍에 송신할 수 있다.
    - 동시의 대량의 데이터를 전송할 수 있고, 다수의 상대방과 효율적으로 데이터를 송수신할 수 있다
    - 서로 다른 종류의 패킷(프로토콜)도 혼재할 수 있고, 연결 일부에 장애가 발생해도 다른 경로로 송수신 가능

### 패킷 교환 방식에 필요한 정보

효율적으로 대량의 데이터를 주고받을 수 있기 때문에 패킷별로 **관리 정보**가 필요하다.

- 관리정보 -> 헤더에 집약되어 통신 데이터 본체(페이로드)와는 별도로 부여된다.
  - 출발지와 목적지 정보
  - 데이터를 분할할 때 목적지에서 데이터를 재구성하는 정보
  - 프로토콜의 종류, 속성 등

#### 패킷 교환 방식의 단점

- 회선 혼잡이나 액세스의 집중 등이 발생한다.( 다수의 사용자가 동시에 데이터를 전송하려고 할 때)
- 패킷이 보낸 순서대로 도착한다는 보장이 없다.(패킷이 네트워크를 통해 여러 경로를 통해 전송되기 때문에. 몇몇 프로토콜은 이러한 문제 해결을 위한 매커니즘을 도입한다.)
- 패킷이 오류로 사라질 수 있다.
- 헤더 등 부가 정보의 처리나 크기가 필요하게 된다.
- 실시간 전송을 할 수 없다.
  - 패킷 교환 위와 같은 정보 교환 방식인데 실시간으로 보내기엔 회선 혼잡, 순서대로 도착한다는 보장x, 오류로 사라질 수 있고, 헤더 등 부가 정보의 처리나 크기가 필요하게 되어 더 많은 비트가 필요. 추가 정보를 처리하는데 시간이 더 걸린다.

<hr/>

## 12. 라우터 - LAN끼리 연결해서 패킷을 처리하는 장비

### LAN끼리 이어 주는 라우터 기능

- 기능
  - LAN과 LAN을 연결하고 목적지에 따라 패킷을 처리(IP 주소를 보고 목적지가 내부 LAN인지 아닌지 확인해서 패킷을 처리)
  - **라우팅**
    - 여러 장치로 구성된 네트워크 세그먼트를 LAN으로 묶어 내부 패킷을 처리하면서 동시에 외부 LAN과도 연결해서 상호 간 패킷을 교환한다.
    - 패킷의 헤더 확인 -> 패킷 판별(자신이 관리하는 LAN을 향한 패킷일 시 받아들여 목적지 장치에 전달, 아닐 시 **다른 라우터**에 전송), (자신의 LAN에서 패킷을 받을 때도 똑같이 처리)
- 구성: 연결 포트 2개(내부, 외부 LAN을 연결하는 용도)
  **다른 라우터**: 자신과 직접 연결된 라우터(**이웃** 또는 인접 라우터)

### 라우터와 인터넷의 관계

- LAN을 연결해서 대규모 LAN을 구성할 경우, 인접한 라우터와 이더넷으로 연결하게 된다.
- **전용선**이나 **ISP**의 회신 등을 이용하면 먼 거리의 라우터와 연결할 수도 있다.(인터넷이 이런 원리로 LAN을 광범위하게 연결한 것)
- 프로토콜: TCP/IP가 기본, 라우터의 **WAN**(Wide Area Network) 쪽에서는 글로벌 IP 주소를 사용
- 에지 라우터: 내부 LAN과 외부 인터넷의 경계에 설치하는 라우터
  - 내부 네트워크와 외부 네트워크 간에 경계에 설치하며 트래픽을 관리, 경계를 형성

#### 용어노트

- WAN: 지리적으로 분산된 네트워크 간의 연결을 의미
- 연결 포트가 2개: 라우터의 내부 LAN 연결 포트를 **LAN 포트**, 외부 LAN(인터넷) 연결 포트를 **WAN 포트**
- 전용선: 인터넷이나 공중 회선 등과는 달리, 특정 통신 상대와 직접 연결된 회선. 전용선은 연결된 통신 상대만 전용으로 쓸 수 있다.
- ISP: internet Service Provider의 약어. 인터넷 연결 서비스를 제공하는 사업자를 가리킴.

<hr/>

## 13. 액세스 포인트 - 무선 LAN 전파를 모으는 장치

### 각 장치의 무선 연결을 설정하는 액세스 포인트

- 액세스 포인트

  - 무선 LAN에서 허브에 해당하는 장치(IEEE 802.11시리즈의 무선 LAN 규격(Wi-Fi)으로 각 단말기와 무선 연결을 설정하는 장치)

- Wi-Fi

  - 대부분의 컴퓨터와 스마트폰에서 연결 가능
  - **IoT 기기**에서도 Wi-Fi연결이 기본
  - 케이블을 배선할 필요x, 전송 속도 빠름 -> 기업 내 LAN에서도 일반적으로 사용

- 광대역 라우터
  - 대부분 Wi-Fi 연결 기능을 갖춤
  - 라우터와 액세스 포인트가 통합된 것(**3계층 장치**)

* 액세스 포인트 or Wi-Fi장비(IEEE 802.11 시리즈)는 **2계층 장치**

### 인프라스트럭처 모드와 애드혹 모드

- 무선 LAN에서 액세스 포인트가 유선 LAN의 L2 스위치에 해당하는 역할

- **인프라스트럭처 모드**(액세스 포인트를 이용하여 연결하는 형태-무선 네트워크에서의 표준적인 운영 모드)

  - 무선 LAN에 연결되는 장치는 내장된 Wi-Fi 모듈을 이용하여 액세스 포인트에 연결 -> 액세스 포인트는 세그먼트 내 통신을 제어한다

- **애드혹 모드**
  - 액세스 포인트를 거치지 않고 장치끼리 직접 **무선 링크 기능**을 사용해서 통신
  - 컴퓨터와 프린터를 직접 연결할 때 사용

#### 용어노트

- IoT 기기: 컴퓨터나 서버 등 종래의 인터넷을 구성하는 단말기 이외에 IP프로토콜로 패킷 통신이 가능한 가전이나 전자 기기 전반을 가르킨다.
- 2계층 장치: 액세스 포인트는 기본적으로 2계층 장치, 연결 식별자는 MAC 주소가 기본이다.
- 무선 링크 기능: 액세스 포인트의 하드웨어는 보통 스위치나 라우터 기능을 갖고 있지만, 이런 상위 계층 기능을 제외한 무선 연결만 실현하는 기능이다.

<hr/>

## 14. 허브(집선 장치) - 여러 회선을 모으는 장치

### 각 장치의 회선을 모으는 허브

- 각 장치의 회선을 정리하고 네트워크를 올바르게 연결하는 장치
- 여러 기기를 이용하는 사무실 등에서 허브를 이용하여 네트워크의 모든 장치를 연결해서 통신하는 것 - 일반적

### 리피터와 스위치 기능도 갖추고 있다

- 허브 뒷면에는 LAN 케이블 연결포트(**RJ-45**)가 여러 개 나열되어 있다.
- 포트 수는 4, 8, 16 등이 일반적(포트 수만큼 선을 모을 수 있다)
- 포트 중 하나를 다른 허브에 연결(캐스케이드 연결)해서 연결 대수를 늘리는 경우도 있다.
- 대부분 허브는 전원이 필요하며, 내부에서 신호 증폭 및 전파 성형 등을 하도록 되어 있어 리피터 기능도 한다.
- **전자 회로**나 **CPU**를 장착해서 소프트웨어로 이더넷 프레임을 해석하고 고도의 연결 전환을 수행하는 제품이 주류가 됐다.
  - 이런 장치를 스위치로 분류되어 엄격히말해 허브가 아님.(현재의 허브는 스위치 제품을 가리키며, 순수한 허브와 구분하고자 **스위칭 허브**라고도 한다.)

<hr/>

## 15. 스위치(스위칭 허브) - 회선을 모아서 연결 대상을 전환하는 장치

### 연결 대상을 전환하는 기능을 가진 스위치

- 연결 대상을 전환하는 기능이 있는 허브(집선 장치) - 2계층
- 원칙적으로 이더넷 프레임을 처리
  - 회선 내 헤더나 페이로드 정보를 참조해서 목적지(MAC 주소)의 장치와 연결합니다.
  - 이더넷 프레임의 충돌을 방지하거나 불필요한 이더넷 프레임 등을 억제할 수 있다.
- 외관은 허브와 동일. 포트수가 24개 or 48개 등으로 늘어날 때가 많음
- 데이터센터 등 서버랙에는 많은 서버나 스토리지 등이 들어가며, 이런 장치를 스위치로 묶어 네트워크를 구축.

#### 이더넷 프레임

이더넷 네트워크에서 데이터를 전송하는 데 사용되는 데이터 단위입니다. 이더넷은 OSI(Open Systems Interconnection) 모델의 데이터 링크 계층에서 동작하며, 이 데이터 링크 계층에서는 프레임이라는 단위로 데이터를 처리합니다. 이더넷 프레임은 네트워크에서 정보를 실어나르고 전송하는 데 사용됩니다

### 스위치로 세그먼트를 분할할 수 있다

- **L2 스위치**: 스위치(2계층에서 연결하는 장치)
- **L3 스위치**: IP 주소에 의한 라우팅 기능을 가진 3계층에서 연결하는 스위치
  - LAN 끼리 연결 가능(라우터와 거의 기능이 동일)
  - 라우터와의 차이
    - L3 스위치가 L2 스위치의 기능을 갖추면서 하드웨어로 처리하므로 고속
    - 포트 수가 많은 제품이 있다.
  - CPU를 탑재하고 있기 때문에 임의의 포트를 지정해서 세그먼트를 나눌 수 있다(**VLAN**).
  - 하드웨어적으로 세그먼트별 포트 수는 고정이지만 VLAN을 사용하면 임의의 포트 수를 가진 세그먼트를 스위치 한 대로 설정할 수 있다.
    - 이론상으로 독립된 네트워크를 만들 수 있다.
      - 보안강화,효율적인 네트워크 분리 ,브로드캐스트 도메인 분리 등등

#### 용어정리

- 데이터 센터: 기업이나 조직이 대량의 데이터를 저장, 처리, 관리하는 중심 지점
- 서버 랙(Rack): 데이터센터에는 서버와 네트워크 장비가 서버 랙이라 불리는 **서버 설치대**에 놓여진다. 서버 랙은 여러 층으로 구성되어 있으며, 각 층에는 여러 대의 서버가 설치됩니다

<hr/>

## 16. 케이블 - 데이터를 전송하는 회선

**케이블**: 이더넷용 LAN 캐이블이 일반적(고속전송하는 스위치 또는 10Gbps 이상의 네트워크 장비 등에선 광섬유 케이블이 사용됨)

### 직렬 케이블과 병렬 케이블

- 직렬 케이블

  - 데이터를 1비트씩 전송

- 병렬 케이블
  - 데이터를 8비트나 16비트 단위로 여러 개의 데이터를 동시에 전송
  - **오래된** 프린터 케이블이나 **오래된** 외장형 저장 장치(**SCSI**)의 케이블 등

### 네트워크에서 사용되는 케이블 규격

- 주요 규격

  - RS-232C(EIA-232-D)

    - 시리얼 케이블의 대표적인 규격
    - 현재는 랙에 들어가는 서버나 라우터, 스위치에 콘솔(디스플레이와 키보드)을 연결할 때 사용된다.

  - 이더넷(IEEE 802.3 시리즈) - 연결형태에 따라 규격이 다름

    - 버스형 이더넷: 10BASE5나 10BASE2 등 동축 케이블을 이용한 규격
    - 스타형 이더넷: 100BASE-T나 1000BASE-TX 같은 트위스트 페어 케이블을 사용한 규격 --> 현재의 주류

  - 광섬유 케이블(ANSI/TIA-568.3-D)
    - **광섬유 코어**의 전송 경로 수 에 따라 싱글 모드와 멀티모드 두 종류로 나뉨.
      - 싱글 모드
        - 유형: OS1, OS2
        - 전송속도: ~10Gbps
        - 전송 손실이 낮고 대역폭이 높기(데이터의 양이나 전송률이 크다는 것을 나타냄) 때문에 기간 통신망에 적합하다
      - 멀티 모드
        - 유형: OM1~OM5
        - 전송속도: ~1Gbps
        - 전송 손실이 상대적으로 높지만 저렴하고 연결하기 쉽다. 근거리 LAN에서 사용하기 적합하다

#### 용어 노트

- SCSI(Small Computer System Interface): ANSI가 책정한 병렬 인터페이스 규격, 전송속도는 5Mbps ~ 320Mbps까지이다. 하드디스크 등 외부 기억 장치의 인터페이스로 활용되었다.
- 콘솔: 서버나 네트워크 장치를 조작하려고 연결하는 기기다. 일반적으로 디스플레이와 키보드로 구성
- 광섬유 코어: 광섬유 심선으로, 빛을 투과하는 유리 섬유로 만들었다. 유리섬유는 구부러져도 빛이 내부를 통과할 수 있다.
- 기간 통신망: 유선, 무선전화를 위하여 마련한 설비 체계나 정보를 전하거나 교환하는 데 필요한 컴퓨터 통신 시스템

<hr/>

## 17. 커넥터 - 케이블을 이어주는 연결부

### 이더넷에서 사용되는 커넥터 규격

케이블을 사용할 시 케이블과 함께 케이블 연결 부분인 커넥터의 규격과 형태가 중요!

- RS-232S 케이블의 커넥터: D-Sub 커넥터

  - RS-232S에는 신호선이 25개 있는데, 콘솔 연결이나 컴퓨터 간 통신이라면 신호선 몇 개면 충분(9핀인 D-Sub 커넥터가 자주 사용됨)

- 이더넷 케이블에 표준 커넥터: RJ-45
  - 전화용 모듈러 잭(RJ-9)과 형태가 같지만, 4쌍의 트위스트 페어 케이블이므로 접점이 8개가 있다.

### 광섬유 커넥터와 USB 커넥터

- 광섬유 커넥터: 광 신호를 주고받는 커넥터(일반 네트워크 장비에 연결할 수 없다 - 광신호를 전기 신호로 변환해야 하기 때문)

  - SFP 트랜시버로 변환, 10Gbps 이상 고속으로 전송하는 스위치엔 SFP포트가 있다.

- USB 커넥터: 장치끼리 통신할 수 있는 규격
  - 규격과 종류는 연동되지 않는다.
  - 규격에 따라 전송속도와 용량이 달라지며, USB 3.x라고해서 모두 고속 및 대용량을 지원하는 것은 아니다.

| 규격    | 전송 속도 |
| ------- | --------- |
| USB 1.1 | 12Mbps    |
| USB 2.0 | 480Mbps   |
| USB 3.x | 5~20Gbps  |
| USB 4.0 | 40Gbps    |

#### 용어노트

- SFP 트랜시버: LAN 케이블과 광섬유 케이블을 스위치에 연결하고자 SFP포트에 연결하는 소형 소켓 모듈이다.

#### 커넥터 종류 및 설명

| 커넥터 종류         | 설명                               |
| ------------------- | ---------------------------------- |
| USB Type-A          | 컴퓨터나 USB 허브 등에 사용된다.   |
| USB Type-B          | 프린터나 USB 마이크 등에 사용된다. |
| USB Type-C          | 고속, 대용량을 지원한다.           |
| mini USB Type-A     | 소형 주변 기기용                   |
| mini USB Type-B     | 소형 주변 기기용                   |
| Micro USB Type-A    | 박형, 공간 절양형                  |
| Micro USB Type-B    | 박형, 공간 절양형                  |
| Micro USB3.0 Type-B | 이동형 HDD 등에 채용되고 있다.     |

<hr/>

## 18. DHCP - IP 주소를 자동으로 할당하는 프로토콜

DHCP: LAN 내 장치에 IP 주소를 자동으로 할당하는 프로토콜
DHCP서버가 이 작업을 처리하지만 일반적으론 라우터와 기본 게이트웨이가 담당한다.

### IP 주소를 할당하는 DHCP

- 네트워크에 연결되는 각 장치의 IP 주소는 네트워크 관리자가 설정
  - 인터넷에 접속하는 장치 -> 글로벌 IP 주소 설정
  - LAN 내 장치에는 프라이빗 IP 주소를 임의로 할당

IP 주소 설정은 각 장치마다 수동 설정 가능 but 효율x 실수 가능성 많음. -> DHCP(Dynamic Host Configuration Protocol)를 이용해 자동 할당
DHCP는 그 방식과 절차를 규정한 클라이언트 서버형 프로토콜

- DHCP 서버: 클라이언트(컴퓨터나 네트워크 장치)의 요청에 따라 관리하는 IP 주소 중 적절한 것을 할당 -> 클라이언트는 할당받은 정보로 자신의 설정 정보를 업데이트

- DHCP 서버용 프로그램: 라우터, 고기능 스위치, 리눅스나 윈도 서버 등에 준비돼있음
- DHCP 클라이언트용 프로그램: 윈도, macOS, 리눅스, 안드로이드, IOS 등 주요 OS에 설치돼 있음

### IP주소 자동 할당 절차

1. 클라이언트가 브로드캐스트로 DHCP서버를 찾는 메세지를 보냄(DHCP Discover).
2. 서버는 메세지를 받으면 자신이 할당할 수 있다고 회신(DHCP Offer).
3. 클라이언트는 응답한 서버에 IP 주소를 요청(DHCP Request).
4. 서버가 필요한 정보를 발행(DHCP Ack)

#### 용어 노트

- 클라이언트 서버형: 컴퓨터 사용형태 중 하나
  - 서버: 특정 처리를 전문으로 하는 컴퓨터
  - 클라이언트: 서버에 액세스해서 서버를 서비스를 이용하는 컴퓨터

<hr/>

## 19. NAT/NAPT - IP 주소를 변환하는 기능

프라이빗 IP주소는 인터넷을 사용할 수 없다.
액세스 하기 위해 NAT 또는 NAPT로 IP 주소를 변환해야한다.

### 할당된 글로벌 IP 주소를 사용하는 NAT

- 기업 등에 할당된 글로벌 IP 주소와 각 장치에 설정된 프라이빗 IP주소의 일대일 대응 변환표를 작성
- 특정 프라이빗 IP주소에서 인터넷 액세스 요청이 있으면 변환표로 해당 통신에 할당
- 인터넷에서 할당받은 글로벌 IP주소로 응답이 있으면 대응하는 프라이빗 IP주소의 장치로 IP 주소를 변환해서 통신함.
- 일반 가정에선 NAT를 사용하여 내부의 여러 장치들이 하나의 공인 IP 주소를 사용하도록 관리합니다.

### TCP/UDP 포트 번호도 이용하는 NAPT

- NAT에서는 사용할 수 있는 글로벌 IP주소가 적으면 여러 장치에서 액세스하기 어려움 -> 적은 글로벌IP 주소를 효율적으로 사용할 수 있게 하는 기술
- IP 주소 변환표 외에 TCP/UDP의 출발지 포트 번호도 사용
  - 프라이빗 IP 주소마다 다른 포트 번호 할당(어떤 디바이스에서 보낸 요청인지, 어떤 디바이스에 대한 응답인지 구별 가능)

#### 용어 정리

- TCP/UDP

  - IP보다 상위에 있는 4층 프로토콜
  - 클라이언트와 서버 간 통신을 관리하거나 포트 번호를 제공
  - 포트번호는 TCP/UDP 패킷의 헤더에 추가

- 출발지 포트 번호: TCP/UDP통신에서는 패킷의 헤더에 출발지 포트 번호와 목적지 포트 번호가 추가된다. 일반적으로 출발지 포트 번호는 송신자 단말기(사용자) 또는 앱을 특정하는 번호를 지정하고, 목적지 포트 번호는 접속할 곳의 앱을 지정한다.

<hr/>

## 20. 라우팅 - 통신 경로를 제어하는 기능

### 경로를 제어하는 라우팅

- 라우터
  - 기능
    - 패킷을 참조해서 자신이 관리하는 LAN으로 들어오는 패킷을 받아들이고, 그렇지 않으면 다른 라우터에 전달
    - 어떤 라우터를 경우해서 패킷의 목적지까지 도달하는지 같은 경로(루트) 제어
      - 경유하는 라우터 수를 최소화 or 고장 난 라우터를 우회할 수 있다
      - 회전 속도나 요금을 판단해서 최단 경로나 최저 요금 경로로 제어할 수도 있다
        cf. 이런 경로 정보를 **메트릭**이라 한다.
      - 메트릭 및 목적지 라우터 정보는 **라우팅 테이블**이라는 표로 관리된다.

### 라우팅 프로토콜의 종류

- 라우팅 프로토콜: 라우터 간 경로를 제어하고자 정보를 교환하는 프로토콜

  - 라우팅 정보의 취급 방법과 동작 방식에 따라 거리 벡터형, 링크 스테이트형, 하이브리드형, 경로 벡터형으로 나눌 수 있다

- IGP(Interior GateWay Protocol)

  - 동일한 **관리 정책**의 라우터(Autonomous System, **AS**)끼리 경로를 제어하는 프로토콜
  - **AS 번호**라는 식별자로 구별. LAN 내부, 외부 둘 다 대상이 된다.
    - 일반적으로 통신 사업자 및 공급자별로 할당됨

- EGP(Exterior GateWay Protocol)
  - AS의 라우팅 정보를 교환하는 프로토콜

### 라우팅 프로토콜의 종류와 유형

#### IGP (Interior Gateway Protocol)

| 라우팅 프로토콜 | 유형          | 설명                                                                            |
| --------------- | ------------- | ------------------------------------------------------------------------------- |
| RIP             | 거리 벡터     | 라우터 간 거리와 방향 테이블을 만들고 라우터 간에 공유한다(작은 규모 네트워크). |
| OSPF            | 링크 스테이트 | 라우터의 링크 상태를 데이터베이스화해서 경로를 판단한다(대규모 네트워크).       |
| EIGRP           | 하이브리드    | 거리벡터, 링크스테이트형 양쪽 기능을 가진다.                                    |

#### EGP (Exterior Gateway Protocol)

| 라우팅 프로토콜 | 유형      | 설명                                                        |
| --------------- | --------- | ----------------------------------------------------------- |
| EGP             | 거리 벡터 | 거리 및 방향과 우선순위 등 속성 정보로 라우팅 테이블을 관리 |
| BGP             | 경로 벡터 | 인터넷과 연결된 네트워크 간 라우팅을 담당                   |

#### 용어 정리

- 관리 정책: 자사나 자체 조직이 관리하는 네트워크의 세그먼트 구성이나 분할 방법 등을 결정하는 기준이나 절차
- AS 번호: 프로토콜상 동일한 관리 정책이 정용되는 네트워크 단위에 할당하는 ID번호.
  실제 인터넷에서는 통신사나 공급자별로 할당되며, IP주소를 관리하는 IANA에서 관리.

<hr/>

## 21. 기본 게이트 웨이 - 라우터가 판단할 수 없는 미지의 패킷을 보내는 곳

### 미지의 패킷을 처리하는 원리

라우터는 자기 패킷이 아니면 라우팅 테이블에 따라 인접 라우터로 보낸다 -> 반복 -> 최종 목적지 라우터로 패킷을 전달
최종 목적지 라우터로 온 패킷을 어디로 보내야될지 모르면 기본적으로 패킷을 버린다.
라우팅 프로토콜엔 **기본 게이트웨이**라는 사고방식이 있어서 어디로 보내야될지 모르는 IP주소의 패킷을 기본으로 **전송할 곳**을 지정할 수 있다

### 기본 게이트웨이의 IP 주소

LAN 내부: 라우터가 목적지 IP주소를 알고 있다.
LAN 외부: 라우터엔 외부 네트워크와 연결하는 포트가 있음(라우팅 테이블에서 적절한 인접 라우터로 패킷을 전송).
-> LAN 내에 각 장치의 기본 게이트 웨이는 라우터의 IP 주소를 지정한다.

#### 용어 노트

- 라우팅 테이블: 라우터가 관리하는 IP 주소의 대응표를 의미.
  라우터까지 거리(라우터 몇 대를 경유하냐)나 회선 속도 등 정보도 들어있다.

- 전송할 곳: 전송할 곳으로서 다른 라우터나 서버 등을 의미한다.

<hr/>

## 22. 서브넷 - 네트워크를 세그먼트로 분할하는 구조

- 서브넷: 하나의 네트워크를 여러 세그먼트로 나누는 것
  각 부분은 독립적으로 관리될 수 있다.
- 장점: IP 주소의 효율적인 할당(대형 네트워크를 쪼갠다), 보안 강화, 네트워크 관리의 편의성, 트래픽 분산 - 성능 최적화

### 네트워크를 분할하는 방식

- IP 네트워크: IP주소 상위 1비트부터 5비트까지 패턴에 따라 주소 영역을 클래스 A~E로 나누어 생각함(클래스 주소)

- 클래스 주소: 글로벌 IP 주소의 배포 단위로 이용됐으나, 클래스 방식은 배포에 낭비가 많다
- CIDR(CIDR Notation 또는 Classless Inter-Domain Routing) 방식: IP 주소의 임의의 비트 위치에서 클래스 부분(네트워크부)과 주소 부분(호스트)으로 구분

- 네트워크부(클래스 부분): IP 주소 상위에서 임의의 비트 수를 사용해서 그 네트워크를 대표하는 주소
  ex) 192.168.100이 클라스부분  
   192.168.100.0 ~ 192.168.100.255까지 주소를 각각의 호스트에 할당 가능.

### 네트워크부와 호스트부를 나타내는 방식

서브넷 마스크: 네트워크부의 비트 패턴을 모두 1(255)로 하고 나머지를 모두 0으로 한 주소 표기
CIDR 방식에선 IP주소의 뒤에 슬래시와 네트워크부의 비트 수를 붙인 프리픽스 표기로 나타낸다.
