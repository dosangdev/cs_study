# 11장. CPU 스케줄링

## 11-1. CPU 스케줄링 개요
#### CPU 스케줄링
> 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것

#### 프로세스 우선순위
- 프로세스는 각자 처리해야 하는 우선순위가 다르다.
- 입출력 집중 프로세스를 우선적으로 실행시켜 입출력장치를 끊임없이 작동시키고, 그 다음 CPU 집중 프로세스를 집중적으로 실행시키는 것이 효율적이다.
- 프로세스 별 우선순위(priority)는 PCB에 명시한다.

> 입출력 집중 프로세스 : 입출력 작업이 많은 프로세스, 입출력 버스트 ex) 비디오 재생, 디스크 백업<br>
> CPU 집중 프로세스 : CPU 작업이 많은 프로세스, CPU 버스트 ex) 복잡한 수학 연산, 컴파일

#### 스케줄링 큐
- 스케줄링 큐는 자원에 접근하고 싶어하는 프로세스들의 PCB가 우선순위 순으로 줄지어 기다리는 줄이다.
- OS는 PCB들이 큐에 줄 서있는 순서와 우선순위를 모두 고려하여 실행한다.
  
<img width="550" alt="image" src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/ba241900-e914-43a7-809f-714723f753a7">

> 준비 큐(ready queue) : CPU 이용 준비 중인 프로세스들이 서는 줄<br>
> 대기 큐(waiting queue) : 입출력장치(I/O) 이용 대기 중인 프로세스들이 서는 줄


#### 선점형 스케줄링 vs 비선점형 스케줄링
> - 선점형 : 자원을 사용 중인 프로세스가 있어도, 다른 프로세스가 새치기하여 사용할 수 있는 프로세스
>   - 프로세스들에게 공정하게 자원을 배분할 수 있다.
>   - 오버헤드 증가
>    
> - 비선점형 : 자원을 사용 중인 프로세스가 있으면, 다른 프로세스가 새치기하여 사용할 수 없는 프로세스
>   - 모든 프로세스가 자원을 골고루 사용할 수 없다.
>   - 오버헤드 감소 

## 11-2. CPU 스케줄링 알고리즘의 종류
#### 1. 선입선처리 스케줄링 (FCFS)
> 단순히 준비 큐에 삽입된 순서대로 프로세스를 처리하는 비선점형 스케줄링 방식

- 호위 효과가 발생할 수 있다.
- 호위효과 : CPU를 오래 사용하는 프로세스가 먼저 도착하면 다른 프로세스는 준비 시간이 너무 길어진다. 

<img width="600" alt="image" src="https://github.com/Minnie5382/devduck-cs-study/assets/97179789/23b19a73-4049-4491-9f95-ed0131d5e4f9">


#### 2. 최단 작업 우선 스케줄링 (SJF)
> 준비 큐에 있는 프로세스 중 CPU 사용 시간이 짦은 프로세스부터 처리하는 비선점형 스케줄링 방식 

#### 3. 라운드 로빈 스케줄링 (RR)
> 선입 선처리 스케줄링 + 타임 슬라이스<br>
> 큐에 삽입된 순서대로 프로세스들이 돌아가며 타임 슬라이스만큼의 시간동안만 사용하는 스케줄링 방식

- 타임 슬라이스의 크기가 매우 중요.
- 타임 슬라이스가 너무 크면 호위 효과가 발생할 수 있고,
- 타임 슬라이스가 너무 작으면 오버 헤드가 증가할 수 있다.
  
#### 4. 최소 잔여 시간 우선 스케줄링 (SRT)
> SJF + RR<br>
> 큐에 삽입된 프로세스들 중에 남은 작업 시간이 적은 순서대로 자원을 사용하되, 정해진 타임 슬라이스만큼만 사용할 수 있는 스케줄링 방식
  
#### 5. 우선순위 스케줄링 (Priority scheduling)
> 각 프로세스에게 우선순위를 부여하고, 우선순위 별로 실행하는 스케줄링 알고리즘

- SJF, SRT 모두 우선순위 스케줄링이라고 볼 수 있다.
- 기아 현상이 발생할 수 있다.
 - 기아(Starvation) 현상 : 우선순위가 낮은 프로세스가 계속 뒤로 밀리는 현상
   - 해결 : 에이징 (대기 중인 프로세스의 대기 시간이 길어질수록 우선순위를 점차 증가시키는 방법) -> 언젠가는 우선순위가 높아질 수 있다.

#### 6. 다단계 큐 스케줄링 (multilevel scheduling)
> 우선순위 별로 준비 큐를 여러 개 만들고, 유형 별로 프로세스를 구분하여 준비 큐에 삽입하는 방식

- 예를 들어, 우선순위가 높아야 하는 I/O 집중 프로세스들은 우선순위 0번 큐에 삽입된다. 우선순위가 낮아야 하는 CPU 집중 플세스들은 우선순위 1번 큐에 삽입된다.
- 준비 큐마다 개별적인 스케줄링 알고리즘이나 타임 슬라이스를 지정할 수 있다.
- 프로세스의 큐 간 이동은 불가능하다.
- 기아 현상이 발생할 수 있다.
  
#### 7. 다단계 피드백 큐 스케줄링
> 프로세스의 큐 간 이동이 가능한 다단계 큐 스케줄링 방식

- 에이징 기법을 적용하여 기아 현상을 예방한다.
- 에이징 기법과 반대로, CPU를 오래 사용하는 프로세스는 점차 우선순위가 낮아진다.
- 최초로 생성된 프로세스는 우선순위 0번 큐에 삽입된다. 타임 슬라이스만큼 CPU를 이용하다가, 작업이 완료되지 않았는데 타임이 끝나면 우선순위 1번 큐에 삽입된다.
- 복잡하지만, 가장 일반적인 CPU 스케줄링 알고리즘이다.

