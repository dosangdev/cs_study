# 11. CPU 스케줄링

## 11-1 CPU 스케줄링 개요

### 프로세스 우선순위

#### 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 것을 CPU 스케줄링이라고 한다.
#### 프로세스마다 우선 순위가 다르기 때문에 빨리 처리해야 하는 프로세스들이 있어 효율적인 처리를 위해 CPU 스케줄링이 필요하다.
#### 입출력 작업이 많은 프로세스를 입출력 집중 프로세스 라고 하고, CPU 작업이 많은 프로세스를 CPU 집중 프로세스라고 한다. 이 두 프로세스가 동시에 CPU 자원을 요구했다고 가정하면,
#### 입출력 집중 프로세스를 먼저 실행시켜 입출력 장치를 끊임없이 작동시키고, 그 다음 CPU 집중 프로세스에 집중적으로 CPU를 할당하는 것이 효율적이다.
#### 이처럼 상황에 맞게, 프로세스의 중요도에 맞게 프로세스가 CPU를 이용할 수 있도록 하기 위해 운영체제는 프로세스마다 우선순위를 부여한다.(우선순위는 각 프로세스의 PCB에 명시되어 있다.)



### 스케줄링 큐

#### 운영체제가 매번 일일히 모든 PCB를 검사하여 먼저 자원을 이용할 프로세스를 결정하는일은 비효율적이기 때문에 운영체제는 각 프로세스가 사용하고 싶은 자원별로 프로세스들을 줄 세운다.
#### 운영체제는 이 줄을 스케줄링 큐로 구현하고 관리하다.
#### 대표적인 큐로는 CPU를 이용하고 싶은 프로세스들이 서는 줄인 준비 큐와 입출력장치를 이용하기 위해 대기 상태에 접어든 프로세스들이 서는 줄인 대기 큐가 있다.
#### 우선순위가 낮은 프로세스들이 먼저 큐에 삽입되어 줄을 섰다고 할지라도 우선순위가 높은 프로세스는 그들보다 먼저 처리될 수 있다.



### 선점형과 비선점형 스케줄링
> - 선점형 스케줄링: 프로세스가 CPU를 비롯한 자원을 사용하고 있더라도 운영체제가 프로세스로부터 자원을 강제로 빼앗아 다른 프로세스에 할당할 수 있는 스케줄링 방식
    어느 한 프로세스의 자원 독점을 막고 프로세스들에 골고루 자원을 배분할 수 있다는 장점이 있지만, 그만큼 문맥 교환 과정에서 오버헤드가 발생할 수 있다.
> - 비선점형 스케줄링: 하나의 프로세스가 자원을 사용하고 있다면 그 프로세스가 종료되거나 스스로 대기 상태에 접어들기 전까진 다른 프로세스가 끼어들 수 없는 스케줄링 방식
    문맥 교환에서 발생하는 오버헤드는 선점형 스케줄링보다 적지만 하나의 프로세스가 자원을 사용 중이라면 당장 자원을 사용해야 하는 상황에서도 기다려야 해서 모든 프로세스가 골고루 자원을 사용할 수 없다는 단점이 있다.


## 11-2 CPU 스케줄링 알고리즘



### 선입 선처리 스케줄링(FCFS 스케줄링)
#### 준비 큐에 삽입된 순서대로 프로세스들을 처리하는 비선점형 스케줄링. 때때로 프로세스들이 기다리는 시간이 매우 길어질 수 있다는 부작용이 있다.
#### 작업 시간이 짧은 작업이 작업 시간이 긴 작업 앞에 머무르는 것을 호위 효과라고 한다.



### 최단 작업 우선 스케줄링(SJF 스케줄링)
#### 준비 큐에 삽입된 프로세스들 중 CPU 이용 시간의 길이가 가장 짧은 프로세스부터 실행하는 스케줄링 방식



### 라운드 로빈 스케줄링
#### 선입 선처리 스케줄링에 각 프로세스가 CPU를 사용할 수 있는 시간을 정해놓는 타임 슬라이스 개념이 더해진 스케줄링 방식



### 최소 잔여 시간 우선 스케줄링(SRT 스케줄링)
#### 최단 작업 우선 스케줄링과 라운드 로빈 알고리즘을 합친 스케줄링 방식
#### 프로세스들은 정해진 타임 슬라이스만큼 CPU를 사용하되, CPU를 사용할 다음 프로세스로는 남아있는 작업 시간이 가장 적은 프로세스가 선택된다.



### 우선순위 스케줄링
#### 프로세스들에 우선순위를 부여하고, 가장 높은 우선순위를 가진 프로세스부터 실행하는 스케줄링 알고리즘(우선 순위가 같으면 선입 선처리로 실행된다.)
#### 우선 순위가 낮은 프로세스는 우선순위가 높은 프로세스들에 의해 실행이 계속 연기되는 기아 현상이 발생할 수 있다.
#### 기아 현상은 오랫동안 대기한 프로세스의 우선순위를 점차 높이는 에이징 방식으로 방지할 수 있다.



### 다단계 큐 스케줄링
#### 우선순위별로 준비 큐를 여러 개 사용하는 스케줄링 방식
#### 큐를 여러 개 두면 프로세스 유형별로 우선순위를 구분하여 실행하는 것이 편리해진다.
#### 큐별로 타임 슬라이스를 여러 개 지정할 수도 있고, 큐마다 다른 스케줄링 알고리즘을 사용할 수도 있다.



### 다단계 피드백 큐 스케줄링
#### 프로세스들이 큐 사이를 이동할 수 없어 발생할 수 있는 기아 현상이 발생할 수 있는 다단계 큐 스케줄링을 보완한 스케줄링 방식
#### 새로 준비 상태가 된 프로세스는 가장 우선순위가 높은 큐에 삽입되어 일정 시간(타임 슬라이스)동안 실행되고 프로세스가 해당 큐에서 실행이 끝나지 않는다면 다음 우선순위 큐에 삽입된다. 즉, CPU를 오래 사용해야 하는 프로세스는 점차 우선순위가 낮아진다.
#### 프로세스들이 큐 사이를 이동할 수 있어 낮은 우선순위 큐에서 너무 오래 기다리고 있는 프로세스가 있다면 에이징 기법으로 우선순위가 높은 큐로 이동시켜 기아 현상을 예방할 수 있다.


